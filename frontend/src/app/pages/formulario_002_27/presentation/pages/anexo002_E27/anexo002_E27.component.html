<div class="modal-header anexo bg-danger text-white">
  <h4 class="modal-title">{{ this.codigoProcedimientoTupa}} {{ this.descProcedimientoTupa}}</h4>
  <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.close(graboUsuario)">

  </button>
</div>
<div class="modal-body anexo">
  <div class="container mt-2 mb-3">
    <form [formGroup]='anexoFG'>
      <div class="center">
        <h6>{{txtTitulo}}</h6>
      </div>
      <div ngbAccordion #acc="ngbAccordion" activeIds="seccion-1,seccion-2,seccion-3,seccion-4,seccion-5">

        <div ngbAccordionItem="seccion-1" [collapsed]="false">
          <h2 ngbAccordionHeader>

            <button ngbAccordionButton>I.
              DESCRIPCIÓN</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>

                <div class="row" formGroupName="d_Seccion1">

                  <div class="col-md-12">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Empresa</label>
                      <input type="text" formControlName="d_s1_empresa" class="form-control text-uppercase">
                    </div>
                  </div>

                  <div class="mb-3 col-lg-4">
                    <label class="control-label campo-obligatorio">Servicio</label>
                    <select class="form-select" formControlName="d_s1_servicio">
                      <option value=''>Seleccione</option>
                      <option *ngFor="let item of listaTipoServicio " [value]="item.id">{{
                        item.nombre }}</option>
                    </select>
                    <div *ngIf="d_s1_servicio.invalid && (d_s1_servicio.dirty || d_s1_servicio.touched)"
                      class="text-danger">
                      <div *ngIf="d_s1_servicio.errors?.required">
                        El campo es obligatorio
                      </div>
                    </div>
                  </div>



                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Nombre de la Estación</label>
                      <input type="text" formControlName="d_s1_nombre_estacion" class="form-control text-uppercase">
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Ubicación de la Estación</label>
                      <input type="text" formControlName="d_s1_ubicacion_estacion" class="form-control text-uppercase">
                    </div>
                  </div>


                  <div class="col-md-12">
                    <app-ubigeo #ubigeoCmpEstFija1 [parentForm]="d_Seccion1" depaFormControlName="d_s1_departamento"
                      provFormControlName="d_s1_provincia" distFormControlName="d_s1_distrito"
                      depaFormLabel="Departamento" provFormLabel="Provincia" distFormLabel="Distrito"
                      [horizontal]="true"></app-ubigeo>
                  </div>


                  <div class="col-md-12">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Localidad</label>
                      <input type="text" formControlName="d_s1_localidad" class="form-control text-uppercase">
                    </div>
                  </div>

                  <div class="col-md-4">
                    <label class="text-bold mb-1">Coordenadas geográficas WGS-84 L.O</label>
                    <div class="mb-2 d-flex">
                      <input type="text" formControlName="d_s1_corGradoLO" title="Grados"
                        class="form-control text-uppercase"> <b> &nbsp;°&nbsp;</b>
                      <input type="text" formControlName="d_s1_corMinutoLO" title="Minutos"
                        class="form-control text-uppercase"> <b>&nbsp;'&nbsp;</b>
                      <input type="text" formControlName="d_s1_corSegundosLO" title="Segundos"
                        class="form-control text-uppercase"> <b>&nbsp;"&nbsp;</b>

                    </div>
                  </div>
                  <div class="col-md-4">
                    <label class="text-bold mb-1">Coordenadas geográficas WGS-84 L.S</label>
                    <div class="mb-2 d-flex">
                      <input type="text" formControlName="d_s1_corGradoLS" title="Grados"
                        class="form-control text-uppercase"> <b> &nbsp;°&nbsp;</b>
                      <input type="text" formControlName="d_s1_corMinutoLS" title="Minutos"
                        class="form-control text-uppercase"> <b>&nbsp;'&nbsp;</b>
                      <input type="text" formControlName="d_s1_corSegundosLS" title="Segundo"
                        class="form-control text-uppercase"> <b>&nbsp;"&nbsp;</b>

                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Altitud (m.s.n.m.)</label>
                      <input type="text" formControlName="d_s1_altitud" class="form-control text-uppercase">
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Indicativo (dejar en blanco si se trata de nueva
                        estación)</label>
                      <input type="text" formControlName="d_s1_indicativo" class="form-control text-uppercase">
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Bloque Horario </label>
                      <input type="text" formControlName="d_s1_bloqueHorario" class="form-control text-uppercase">
                    </div>
                  </div>


                </div>



              </ng-template>
            </div>
          </div>
        </div>

        <div ngbAccordionItem="seccion-2" [collapsed]="false">
          <h2 ngbAccordionHeader>

            <button ngbAccordionButton>II.
              EQUIPAMIENTO</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>

                <div class="row" formGroupName="e_Seccion2">
                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Marca</label>
                      <input type="text" formControlName="d_s2_marca" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Modelo</label>
                      <input type="text" formControlName="d_s2_modelo" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Potencia(W)</label>
                      <input type="text" formControlName="d_s2_potenciaW" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Potencia(dBm)</label>
                      <input type="text" formControlName="d_s2_potenciadBm" class="form-control text-uppercase">
                    </div>
                  </div>


                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Rango de Frecuencias TX (MHz) </label>
                      <input type="text" formControlName="d_s2_rangoFrecuenciaTx" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Rango de Frecuencias RX (MHz) </label>
                      <input type="text" formControlName="d_s2_rangoFrecuenciaRx" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Capacidad por portadora (Mbps) </label>
                      <input type="text" formControlName="d_s2_capacidadPortadora" class="form-control text-uppercase">
                    </div>
                  </div>

                  <div class="col-md-3">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Tipo de Emisión </label>
                      <input type="text" formControlName="d_s2_tipoEmision" class="form-control text-uppercase">
                    </div>
                  </div>

                </div>



              </ng-template>
            </div>
          </div>
        </div>

        <div ngbAccordionItem="seccion-3" [collapsed]="false">
          <h2 ngbAccordionHeader>

            <button ngbAccordionButton>III. SISTEMA
              RADIANTE</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>

                <div class="row" formGroupName="s_Seccion3">
                  <div class="col-lg-12">
                    <div class="table-responsive">
                      <table class="table table-sm table-bordered table-hover table-striped">
                        <tr>
                          <th></th>
                          <th>Sector 1 </th>
                          <th>Sector 2</th>
                          <th>Sector 3</th>
                          <th>Sector 4</th>
                        </tr>
                        <tr>
                          <td>Tipo de Antena </td>
                          <td> <input type="text" formControlName="d_s3_tipoAntenaSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_tipoAntenaSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_tipoAntenaSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_tipoAntenaSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>
                        <tr>
                          <td>Marca </td>
                          <td> <input type="text" formControlName="d_s3_marcaSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_marcaSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_marcaSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_marcaSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>
                        <tr>
                          <td>Modelo </td>
                          <td> <input type="text" formControlName="d_s3_modeloSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_modeloSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_modeloSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_modeloSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>

                        <tr>
                          <td>Ganancia (dBi) </td>
                          <td> <input type="text" formControlName="d_s3_gananciadBiSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_gananciadBiSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_gananciadBiSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_gananciadBiSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>

                        <tr>
                          <td>Pire (W) </td>
                          <td> <input type="text" formControlName="d_s3_pireWSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_pireWSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_pireWSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_pireWSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>

                        <tr>
                          <td>
                            Pire (dBm)
                          </td>
                          <td>
                            <input type="text" formControlName="d_s3_pireDbmSector1"
                              class="form-control text-uppercase">
                          </td>
                          <td>
                            <input type="text" formControlName="d_s3_pireDbmSector2"
                              class="form-control text-uppercase">
                          </td>
                          <td>
                            <input type="text" formControlName="d_s3_pireDbmSector3"
                              class="form-control text-uppercase">
                          </td>
                          <td>
                            <input type="text" formControlName="d_s3_pireDbmSector4"
                              class="form-control text-uppercase">
                          </td>
                        </tr>

                        <tr>
                          <td>Altura Instalada (m)</td>
                          <td> <input type="text" formControlName="d_s3_alturaInstaladaSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_alturaInstaladaSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_alturaInstaladaSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_alturaInstaladaSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>

                        <tr>
                          <td>Distancia de la antena a todo punto accesible por las personas (m)</td>
                          <td> <input type="text" formControlName="d_s3_distanciaDeAnteanaSector1"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_distanciaDeAnteanaSector2"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_distanciaDeAnteanaSector3"
                              class="form-control text-uppercase"> </td>
                          <td> <input type="text" formControlName="d_s3_distanciaDeAnteanaSector4"
                              class="form-control text-uppercase"> </td>
                        </tr>
                      </table>
                    </div>

                  </div>

                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Altura de Torre (m) </label>
                      <input type="text" formControlName="d_s3_alturaTorre" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Altura de Edificio (m) </label>
                      <input type="text" formControlName="d_s3_alturaEdificio" class="form-control text-uppercase">
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mb-2">
                      <label class="text-bold mb-1">Número de sectores</label>
                      <input type="text" formControlName="d_s3_numeroSectores" class="form-control text-uppercase">
                    </div>
                  </div>
                </div>

              </ng-template>
            </div>
          </div>
        </div>

        <div ngbAccordionItem="seccion-4" [collapsed]="false">
          <h2 ngbAccordionHeader>

            <button ngbAccordionButton>IV. DATOS DEL
              INGENIERO</button>
          </h2>

          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>
                <div class="row" formGroupName="s_Seccion4">

                  <div class="col-lg-12" formGroupName="DatosContacto">


                    <div class="row gx-2">
                      <div class="mb-3 col-lg-4">
                        <label class="control-label campo-obligatorio">Tipo Documento</label>
                        <select class="form-select" formControlName="dc_tipoDocumento"
                          [class.control-invalid]="formInvalid(dc_tipoDocumento)">
                          <option value=''>Seleccione</option>
                          <option *ngFor="let item of listaTiposDocumentos | slice:0:3" [value]="item.id">{{
                            item.documento }}</option>
                        </select>
                        <div
                          *ngIf="f_s4_dc_TipoDocumento.invalid && (f_s4_dc_TipoDocumento.dirty || f_s4_dc_TipoDocumento.touched)"
                          class="text-danger">
                          <div *ngIf="f_s4_dc_TipoDocumento.errors?.required">
                            El campo es obligatorio
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_numeroDocumento"
                          label="N° Documento" [maxLength]="maxLengthNumeroDocumentoDatCont"
                          placeHolder="Ingrese el número de documento" [onlyNumbers]="true" [inputGroup]="true"
                          [append]="true" iconBtnAppend="fa-search" [btnAppend]="true"
                          (clickAppend)="buscarNumeroDocumentoDatosContacto($event)">
                        </app-basic-input>
                      </div>
                    </div>


                    <div class="row gx-2">
                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_nombre"
                          label="Nombres" placeHolder="Ingrese el nombre" [maxLength]="50">
                        </app-basic-input>
                      </div>

                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_apePaterno"
                          label="Apellido Paterno" placeHolder="Ingrese el apellido paterno" [maxLength]="50">
                        </app-basic-input>
                      </div>

                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_apeMaterno"
                          label="Apellido Materno" placeHolder="Ingrese el apellido materno" [maxLength]="50">
                        </app-basic-input>
                      </div>
                    </div>

                    <div class="row gx-2">

                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_cip"
                          label="C.I.P. N°" placeHolder="Ingrese C.I.P. N°" [maxLength]="30">
                        </app-basic-input>
                      </div>

                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_telefono"
                          label="Teléfono Fijo" placeHolder="Ingrese el teléfono fijo" [onlyNumbers]="true"
                          [maxLength]="9">
                        </app-basic-input>


                      </div>
                      <div class="col-lg-4">
                        <app-basic-input [parentForm]="f_s4_DatosContacto" inputFormControlName="dc_celular"
                          label="Celular" placeHolder="Ingrese el número de celular" [onlyNumbers]="true"
                          [maxLength]="9">
                        </app-basic-input>


                      </div>

                    </div>

                  </div>

                </div>

              </ng-template>
            </div>
          </div>

        </div>


        <div ngbAccordionItem="seccion-5" [collapsed]="false">
          <h2 ngbAccordionHeader>

            <button ngbAccordionButton>V. DECLARACION
              JURADA</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>
                <div formGroupName="a_Seccion5">
                  <div class="mt-2 mb-4 ng-star-inserted" *ngIf="a_s5_declaracion1FC.enabled">
                    <div class="alert alert-custom">
                      <div _ngcontent-ehx-c118="" class="row gx-2" style="align-items: center;">
                        <div _ngcontent-ehx-c118="" class="col">
                          <div _ngcontent-ehx-c118=""> 1 Toda la información proporcionada es veraz,
                            así como los documentos presentados son auténticos, en caso contrario,
                            me someto al procedimiento y a las sanciones previstas en la Ley N°
                            27444, Ley del Procedimiento Administrativo General y/o normas
                            complementarias.
                          </div>
                        </div>
                        <div _ngcontent-ehx-c118="" class="col-auto">
                          <div _ngcontent-ehx-c118="" class="d-flex flex-row p-2 ms-4">
                            <ui-switch formControlName="a_s5_declaracion1FC" (change)="cambio()"
                              class="ng-valid ng-touched ng-dirty"></ui-switch> NO / SI
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-active">
                    <span style="text-align: justify; display: block;">
                      NOTA: En el presente documento electrónico se ha vinculado e identificado al
                      firmante, así como se ha garantizado la autenticación e integridad del mismo a
                      través de la firma electrónica utilizada atraves del usuario y clave de ingreso al
                      Sistema Tupa Digital del Ministerio de Transportes y Comunicaciones , la cual tiene
                      la misma validez y eficacia jurídica que la firma manuscrita, de conformidad con el
                      artículo primero y segundo de la Ley N° 27269 - Ley de Firmas y Certificados
                      Digitales y lo establecido en el inciso c) del numeral 47.1 del Art 47 del
                      Reglamento de la Ley de Gobierno Digital, aprobado mediante Decreto Supremo
                      029-2021-PCM.
                    </span>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>

      </div>
    </form>
  </div>
</div>

<div class="modal-footer anexo">
  <div class="row">
    <div class="col-lg-12 d-flex">
      <div class="flex-1">
        <div class="btn-group" role="group" aria-label="Basic example">
          <button type="button" class="btn btn-secondary" [disabled]="idAnexo === 0" (click)="descargarPdf()">
            <i class="far fa-eye"></i>
            Visualizar
          </button>
        </div>
      </div>
      <div class="flex-1 text-end">
        <button class="btn btn-success" (click)="guardarAnexo()" [disabled]="anexoFG.invalid">
          <i class="far fa-save"></i>
          {{
          (idAnexo === 0 ? 'Grabar' : 'Modificar')
          }}
        </button>
      </div>
    </div>
  </div>
</div>
