<div class="modal-header anexo bg-danger text-white">
    <h4 class="modal-title">{{ this.codigoProcedimientoTupa}} {{ this.descProcedimientoTupa}}</h4>
    <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.close(graboUsuario)">
      
  </button>
</div>

<div class="modal-body anexo">
    <!-- <form novalidate [formGroup]="formAnexo" (ngSubmit)="save()"> -->
    <div class="container-fluid">
        <form novalidate [formGroup]="formAnexo">
            <div class="center">
                <h5>ANEXO 002-H/28 TRANSFERENCIA SERVICIOS DE RADIODIFUSIÓN</h5>
            </div>
            <div ngbAccordion #acc="ngbAccordion" activeIds="seccion-1,seccion-2,seccion-3,seccion-4">
                <div ngbAccordionItem="seccion-1" [collapsed]="false">
                    <h2 ngbAccordionHeader>
                        
                            <button ngbAccordionButton>I. TRANSFERENCIA DE ACCIONES, PARTICIPACIONES, TITULARIDAD Y MODIFICACIÓN DEL REPRESENTANTE LEGAL, DIRECTORIO O CONSEJO DIRECTIVO</button>
                        </h2>
                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div class="row gx-2">
                            <div class="col-md-12">
                                <p>
                                    A continuación indicar los nuevos socios/accionistas/asociados/representante legal/directores/consejo directivo/junta directiva:
                                </p>
                            </div>
                        </div>
                        <br />
                        <div class="mb-3 row">
                            <div class="col-sm-12 col-lg-3">
                                <label>Tipo de Documento</label>
                                <select class="form-select" (change)="changeTipoDocumento()" formControlName="s1_tipoDocumentoSocio">
                                    <option value=''>Seleccione</option>
                                    <option *ngFor="let item of listaTiposDocumentos;" [value]="item.id">{{ item.documento }}</option>
                                </select>
                                <!--
                                <div class="d-flex flex-2 flex-column justify-content-between p-2">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-2">Tipo de Documento</div>
                                        <div class="flex-2">
                                            <select class="form-select" (change)="changeTipoDocumento()" formControlName="s2_tipoDocumentoSocio">
                                                <option value=''>Seleccione</option>
                                                <option *ngFor="let item of listaTiposDocumentos;" [value]="item.id">{{ item.documento }}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>-->
                            </div>
                            <div class="col-sm-12 col-lg-3">
                                <label>Número de Documento</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" formControlName="s1_numeroDocumentoSocio" placeholder="Número de documento">
                                        <div class="input-group-text"><button type="button" class="btn text-primary shadow-none btn-sm m-0 p-0 border-0" (click)="buscarNumeroDocumento()"><i class="fas fa-search"></i></button></div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-6">
                                <label>Nombres y Apellidos</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" formControlName="s1_nombresApellidos">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3 row">
                            <div class="col-lg-3">
                                <app-basic-input [parentForm]="formAnexo" 
                                    inputFormControlName="s1_nacionalidad" label="Nacionalidad"
                                    placeHolder="" [readonly]="true" 
                                    [maxLength]="15">
                                </app-basic-input>
                            </div>
                            <div class="col-lg-3">
                                <app-basic-input [parentForm]="formAnexo" 
                                    inputFormControlName="s1_cargo" label="Cargo/Condición"
                                    placeHolder="" [readonly]="true" 
                                    [maxLength]="100">
                                </app-basic-input>
                            </div>
                            <div class="col-lg-3">
                                <!--<app-basic-input [parentForm]="formAnexo" 
                                    inputFormControlName="s2_capital" label="Capital"
                                    placeHolder="" [readonly]="true" 
                                    [maxLength]="2" [customAppend]="true">
                                    <ng-container slot="customAppend">
                                        <span class="input-group-text">%</span>
                                    </ng-container>
                                </app-basic-input>-->

                                <label>Capital</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" formControlName="s1_capital" placeholder="">
                                        <div class="input-group-text"><button type="button" class="btn text-primary shadow-none btn-sm m-0 p-0 border-0"><b>%</b></button></div>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="col-md-12 text-end">
                                    <label class="col-lg-12">&nbsp;</label>
                                    <button type="button" class="btn btn-primary" (click)="addSuscrito()"><i class="fas fa-plus"></i> Agregar</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead>
                                            <tr class="bg-secondary text-white text-center">
                                                
                                                <th scope="col">N°</th>
                                                <th scope="col">Nombres y Apellidos</th>
                                                <th scope="col">Tipo de documento</th>
                                                <th scope="col">Nro. Documento</th>
                                                <th scope="col">Nacionalidad</th>
                                                <th scope="col">Condición o cargo</th>
                                                <th scope="col">% del Capital o participación social</th>
                                                <th scope="col">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngIf="suscritos.length === 0">
                                                <td colspan="8" class="text-center font-italic">No se encontraron registros.</td>
                                            </tr>
                                            <tr *ngFor="let suscrito of suscritos; let i = index">
                                                <td>{{ i + 1 }}</td>
                                                <td>{{ suscrito.nombresApellidos }}</td>
                                                <td>{{ suscrito.tipoDocumento.documento }}</td>
                                                <td>{{ suscrito.numeroDocumento }}</td>
                                                <td>{{ suscrito.nacionalidad }}</td>
                                                <td>{{ suscrito.cargo }}</td>
                                                <td>{{ suscrito.capital }}</td>
                                                <td class="text-center">
                                                    <button type="button" class="btn text-primary shadow-none pe-2" (click)="editSuscrito(suscrito, i)" title="Eliminar"><i class="far fa-edit"></i></button>
                                                    <button type="button" class="btn text-danger shadow-none ps-2" (click)="deleteSuscrito(suscrito, i)" title="Eliminar"><i class="far fa-trash-alt"></i></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
</div>
</div>
                </div>

                <div ngbAccordionItem="seccion-2" [collapsed]="false">
                    <h2 ngbAccordionHeader>
                        
                            <button ngbAccordionButton>II. TRANSFERENCIA DE AUTORIZACIÓN DEL SERVICIO DE RADIODIFUSIÓN</button>
                        </h2>

                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div class="row" formGroupName="Seccion2">
                            
                            <div class="row gx-2 col-lg-12">
                                <div class="col-lg-3">
                                    <app-basic-input [parentForm]="f_Seccion2" 
                                        inputFormControlName="resolucion" label="Resolución de autorización"
                                        placeHolder="" [readonly]="false" 
                                        [maxLength]="100">
                                    </app-basic-input>
                                </div>
                                <div class="col-lg-3">
                                    <app-basic-input [parentForm]="f_Seccion2" 
                                        inputFormControlName="frecuencia" label="Frecuencia / Canal"
                                        placeHolder="" [readonly]="false" 
                                        [maxLength]="100">
                                    </app-basic-input>
                                </div>
                                <div class="col-lg-3">
                                    <app-basic-input [parentForm]="f_Seccion2" 
                                        inputFormControlName="localidad" label="Localidad"
                                        placeHolder="" [readonly]="false" 
                                        [maxLength]="200">
                                    </app-basic-input>
                                </div>
                                <div class="col-lg-3">
                                    <app-basic-input [parentForm]="f_Seccion2" 
                                        inputFormControlName="departamento" label="Departamento"
                                        placeHolder="" [readonly]="false" 
                                        [maxLength]="100">
                                    </app-basic-input>
                                </div>
                            </div>
                            
                        </div>
                    </ng-template>
</div>
</div>
                </div>

                <div ngbAccordionItem="seccion-3" [collapsed]="false">
                    <h2 ngbAccordionHeader>
                        
                            <button ngbAccordionButton>III. DATOS DEL ADQUIRIENTE</button>
                        </h2>

                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div class="row" formGroupName="Seccion3">
                            <div class="col-lg-12">
                                <div class="row gx-2">
                                    <div class="col-sm-3">
                                       
                                    </div>
                                    <div class="col-sm-3">
                                        <label class="container_rb">Persona natural
                                            <input type="radio" value="pn" formControlName="tipoAdquiriente" (change)="onChangeTipoAdquiriente($event)" />
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="col-sm-3" >
                                        <label class="container_rb">Persona jurídica
                                            <input type="radio" value="pj"  formControlName="tipoAdquiriente" (change)="onChangeTipoAdquiriente($event)"/>
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                    <div class="col-sm-3">
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12" *ngIf="this.tipoAdquiriente=='pn'"  formGroupName="PersonaNatural" >
                                <div class="row gx-2">
                                    <div class="mb-3 col-lg-4">
                                        <label class="control-label campo-obligatorio">Tipo Documento</label>
                                        <select class="form-select" formControlName="pn_tipoDocumento">
                                            <option value=''>Seleccione</option>
                                            <option *ngFor="let item of listaTiposDocumentos | slice:0:3"
                                                [value]="item.id">{{
                                                item.documento }}</option>
                                        </select>
                                        <div *ngIf="f_s3_pn_TipoDocumento.invalid && (f_s3_pn_TipoDocumento.dirty || f_s3_pn_TipoDocumento.touched)"
                                            class="text-danger">
                                            <div *ngIf="f_s3_pn_TipoDocumento.errors?.required">
                                                El campo es obligatorio
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaNatural"
                                            inputFormControlName="pn_numeroDocumento" label="N° Documento"
                                            [maxLength]="maxLengthNumeroDocumentoRepLeg"
                                            placeHolder="Ingrese el número de documento" [onlyNumbers]="true"
                                             [btnAppend]="true" iconBtnAppend="fa-search"
                                            [disabledAppend]="f_s3_pn_TipoDocumento.value.trim() == '' || disableBtnBuscarRepLegal"
                                            (clickAppend)="buscarNumeroDocumentoPN($event)">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaNatural"
                                            inputFormControlName="pn_nombres" label="Apellidos y Nombres"
                                            placeHolder="Ingrese los apellidos y nombres" [maxLength]="50"
                                            [readonly]="true">
                                        </app-basic-input>
                                    </div>
                                </div>
                                <div class="row gx-2">
                                    <div class="mb-3 col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaNatural"
                                            inputFormControlName="pn_telefono" label="Teléfono Fijo"
                                            placeHolder="Ingrese el número de teléfono" [onlyNumbers]="true"
                                            [maxLength]="9">
                                        </app-basic-input>
                                    </div>
                                    <div class="mb-3 col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaNatural"
                                            inputFormControlName="pn_celular" label="Celular"
                                            placeHolder="Ingrese el número de celular" [onlyNumbers]="true"
                                            [maxLength]="9">
                                        </app-basic-input>
                                    </div>
                                    <div class="mb-3 col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaNatural"
                                            inputFormControlName="pn_correo" label="Correo Electrónico (E-mail)"
                                            placeHolder="Ingrese el correo electrónico" [maxLength]="50">
                                        </app-basic-input>
                                    </div>
                                </div>
                                <div class="row gx-2">
                                    <div class="mb-3 col-lg-12">
                                        <app-basic-input [parentForm]="f_s3_PersonaNatural"
                                            inputFormControlName="pn_domicilio" label="Domicilio Legal (Urbanización/ A.H./ Otro/    Mz./ Lote/ Sub. Lote.     Avenida/Calle/Jirón/ Pasaje)"
                                            placeHolder="Ingrese el domicilio legal" [maxLength]="100">
                                        </app-basic-input>
                                    </div>
                                </div>
                                <app-ubigeo #ubigeoCmpPersonaNatural [parentForm]="f_s3_PersonaNatural"
                                    depaFormControlName="pn_departamento"
                                    provFormControlName="pn_provincia" 
                                    distFormControlName="pn_distrito"
                                    depaFormLabel="Departamento" provFormLabel="Provincia" distFormLabel="Distrito"
                                    [horizontal]="true"></app-ubigeo>
                            </div>
                            
                            <div class="col-lg-12" *ngIf="this.tipoAdquiriente=='pj'" formGroupName="PersonaJuridica">
                                <div class="row gx-2">
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaJuridica"
                                            inputFormControlName="pj_ruc" label="N° de Ruc"
                                            placeHolder="Ingrese el número de RUC" [onlyNumbers]="true"
                                             [btnAppend]="true" iconBtnAppend="fa-search"
                                            [disabledAppend]="f_s3_pj_Ruc.value.trim() == ''"
                                            [maxLength]="11" (clickAppend)="buscarNumeroRucPJ($event)">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-8">
                                        <app-basic-input [parentForm]="f_s3_PersonaJuridica"
                                            inputFormControlName="pj_razonSocial" label="Razón Social"
                                            placeHolder="Ingrese la razón social" [maxLength]="100">
                                        </app-basic-input>
                                    </div>
                                    
                                </div>
                                <div class="row gx-2">
                                    <div class="col-lg-12">
                                        <app-basic-input [parentForm]="f_s3_PersonaJuridica"
                                            inputFormControlName="pj_domicilio" label="Domicilio Legal"
                                            placeHolder="Ingrese el domicilio legal" [maxLength]="100">
                                        </app-basic-input>

                                    </div>
                                </div>
                                <div class="row gx-2">
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaJuridica"
                                            inputFormControlName="pj_departamento" label="Departamento">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaJuridica"
                                            inputFormControlName="pj_provincia" label="Provincia">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_PersonaJuridica"
                                            inputFormControlName="pj_distrito" label="Distrito">
                                        </app-basic-input>
                                    </div>
                                   
                                </div>
                                <hr>
                            </div>
                            
                            <div class="col-lg-12" *ngIf="this.tipoAdquiriente=='pj'"formGroupName="RepresentanteLegal">
                                <div class="mt-4"><strong>REPRESENTANTE LEGAL</strong></div>
                                <br>
                                <div class="row gx-2">
                                    <div class="mb-3 col-lg-4">
                                        <label class="control-label campo-obligatorio">Tipo Documento</label>
                                        <select class="form-select" formControlName="rl_tipoDocumento">
                                            <option value=''>Seleccione</option>
                                            <option *ngFor="let item of listaTiposDocumentos | slice:0:3"
                                                [value]="item.id">{{
                                                item.documento }}</option>
                                        </select>
                                        <div *ngIf="f_s3_rl_TipoDocumento.invalid && (f_s3_rl_TipoDocumento.dirty || f_s3_rl_TipoDocumento.touched)"
                                            class="text-danger">
                                            <div *ngIf="f_s3_rl_TipoDocumento.errors?.required">
                                                El campo es obligatorio
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_numeroDocumento" label="N° Documento"
                                            [maxLength]="maxLengthNumeroDocumentoRepLeg"
                                            placeHolder="Ingrese el número de documento" [onlyNumbers]="true"
                                             [btnAppend]="true" iconBtnAppend="fa-search"
                                            [disabledAppend]="f_s3_rl_TipoDocumento.value.trim() == '' || disableBtnBuscarRepLegal"
                                            (clickAppend)="buscarNumeroDocumentoRepLeg($event)">
                                        </app-basic-input>
                                    </div>
                                </div>
                                <div class="row gx-2">
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_nombre" label="Nombres"
                                            placeHolder="Ingrese el nombre" [maxLength]="50">
                                        </app-basic-input>
                                    </div>

                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_apePaterno" label="Apellido Paterno"
                                            placeHolder="Ingrese el apellido paterno" [maxLength]="50">
                                        </app-basic-input>
                                    </div>

                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_apeMaterno" label="Apellido Materno"
                                            placeHolder="Ingrese el apellido materno" [maxLength]="50">
                                        </app-basic-input>
                                    </div>
                                </div>
                                <div class="row gx-2">
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_telefono" label="Teléfono Fijo"
                                            placeHolder="Ingrese el teléfono fijo" [onlyNumbers]="true"
                                            [maxLength]="9">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_celular" label="Celular"
                                            placeHolder="Ingrese el número de celular" [onlyNumbers]="true"
                                            [maxLength]="9">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-4">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_correo"
                                            label="Correo Electrónico (E-mail)"
                                            placeHolder="Ingrese el correo electrónico" [maxLength]="50">
                                        </app-basic-input>
                                    </div>
                                </div>
                                <!--
                                <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                    inputFormControlName="rl_domicilio" label="Domicilio Legal"
                                    placeHolder="Ingrese el domicilio legal" [maxLength]="100">
                                </app-basic-input>

                                <app-ubigeo #ubigeoCmpRepresentanteLegal [parentForm]="f_s3_RepresentanteLegal"
                                    depaFormControlName="rl_departamento"
                                    provFormControlName="rl_provincia"
                                    distFormControlName="rl_distrito" depaFormLabel="Departamento"
                                    provFormLabel="Provincia" distFormLabel="Distrito" [horizontal]="true">
                                </app-ubigeo>
                                -->
                                <div class="row gx-2">
                                    <div class="mb-3 col-lg-3">
                                        <label class="control-label">Oficina registral <span
                                                class="text-danger">(*)</span></label>
                                        <select class="form-select" formControlName="rl_oficina">
                                            <option value="">Seleccione</option>
                                            <option *ngFor="let oficina of oficinasRegistral;"
                                                [value]="oficina.value">{{
                                                oficina.text }}</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_partida"
                                            label="Poder registrado en la partida N°"
                                            placeHolder="Ingrese el número de partida" [onlyNumbers]="true"
                                            [maxLength]="15">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-3">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_asiento" label="Asiento N°"
                                            placeHolder="Ingrese el número de asiento" [onlyNumbers]="true"
                                            [maxLength]="15">
                                        </app-basic-input>
                                    </div>
                                    <div class="col-lg-3">
                                        <app-basic-input [parentForm]="f_s3_RepresentanteLegal"
                                            inputFormControlName="rl_objeto" label="Objeto N°"
                                            placeHolder="Ingrese el número de objeto" [onlyNumbers]="true"
                                            [maxLength]="15">
                                        </app-basic-input>
                                    </div>
                                </div>
                            
                            </div>
                        </div>
                    </ng-template>
</div>
</div>
                </div>

                <div ngbAccordionItem="seccion-4" [collapsed]="false">
                    <h2 ngbAccordionHeader>
                        
                            <button ngbAccordionButton>III. DECLARACION JURADA</button>
                        </h2>

                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div class="alert alert-custom">
                            <div class="row gx-2">
                                <div class="col-md-10">
                                    <div>
                                        Toda la información proporcionada es veraz, así como los documentos presentados son auténticos, 
                                        en caso contrario, me someto al procedimiento y a las sanciones previstas en la Ley N° 27444, 
                                        sLey del Procedimiento Administrativo General y/o normas complementarias.
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="d-flex flex-row p-2 ms-4">
                                        <ui-switch  formControlName="declaracion">
                                            
                                        </ui-switch>
                                        <label class="col-form-label"> NO/SI </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
</div>
</div>
                </div>
            </div>

        </form>
    </div>
</div>
<div class="modal-footer anexo">

    <div class="row mt-3">
        <div class="col-sm-12 d-flex">

            <div class="flex-1">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-secondary" [disabled]="idAnexo === 0" (click)="descargarPdf()">
                  <i class="far fa-eye"></i>
                  Visualizar
              </button>
                </div>
            </div>

            <div class="flex-1 text-end">
                <button class="btn btn-success w-50" (click)="save()" [disabled]="this.formAnexo.invalid">
                    <i class="far fa-save"></i>
                    {{
                        (idAnexo === 0 ? 'Grabar' : 'Modificar')
                    }}
                </button>
            </div>
        </div>
    </div>

</div>