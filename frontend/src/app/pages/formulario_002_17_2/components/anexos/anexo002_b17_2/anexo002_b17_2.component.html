<div class="modal-header anexo bg-danger text-white">
    <h4 class="modal-title">{{ this.codigoProcedimientoTupa}} {{ this.descProcedimientoTupa}}</h4>
    <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.close(graboUsuario)">
        
    </button>
</div>
<div class="modal-body anexo">
    <div class="container mt-2 mb-3">
        <form [formGroup]='anexoFG'>
            <div class="center">
                <h5>ANEXO 002-B17.2 &nbsp;&nbsp; TRANSPORTE INTERNACIONAL TERRESTRE COMUNIDAD ANDINA</h5>
            </div>
            <div ngbAccordion #acc="ngbAccordion" activeIds="seccion-3">
                <div  [disabled]="a_Seccion1FG.disabled" ngbAccordionItem="seccion-1">
                    <h2 ngbAccordionHeader>
                        
                            <button ngbAccordionButton>I.
                                COMPLETAR SEGÚN LOS REQUISITOS DEL PROCEDIMIENTO: DSTT-016, DSTT-017</button>
                        </h2>
                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div formGroupName="a_Seccion1FG">
                            <!--si es DSTT-017-->
                            <div class="row">
                                <div class="col-lg-12 d-flex flex-column">
                                    <div class="d-flex align-items-center" *ngIf="this.codigoProcedimientoTupa!='DSTT-016'">
                                        <div class="flex-1 campo-obligatorio">Ámbito de operación:</div>
                                        <input type="text" class="form-control flex-3 text-uppercase"
                                            formControlName="a_s1_AmbitoOperacionFC"
                                            [class.control-invalid]="formInvalid('a_s1_AmbitoOperacionFC')" />
                                    </div>
                                    <div class="py-2">
                                        <div class="col-md-12 alert alert-info small" role="alert">
                                          <h6 class="alert-heading text-start"><i class="fas fa-exclamation-circle"></i> Deberá adjuntar en el requisito 4, los documentos de poder que acredite la representación legal de la empresa en los Países Miembros por cada país seleccionado donde el transportista desea operar. </h6>
                                        </div>
                                    </div>
                                    <hr class="w-100">

                                    <div formArrayName="a_s1_PaisesOperarFA" class="d-flex">
                                        <div class="campo-obligatorio d-flex align-self-center">
                                            Países con los que se pretende operar (incluido origen):
                                        </div>
                                        <div class="contenedor-check-paises"
                                            [class.control-invalid]="formInvalid(a_s1_PaisesOperarFA)">
                                            <div *ngFor="let item of a_s1_PaisesOperarFA.controls; let i=index">
                                                <div [formGroupName]="i">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" id="inpCheckPOS1{{ i }}"
                                                            type="checkbox" formControlName="checked">
                                                        <label class="form-check-label" for="inpCheckPOS1{{ i }}">{{
                                                            item.get('text').value }}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-3" formGroupName="a_s1_RutasFG" *ngIf="this.codigoProcedimientoTupa!='DSTT-016'">
                                <div class="col-lg-12 d-flex flex-column"
                                    *ngFor="let item of a_s1_RutasFG.controls | keyvalue">
                                    <div [formGroupName]="item.key">
                                        <div class="d-flex flex-column" *ngIf="validarCheckPais(item)">
                                            <div class="d-flex flex-row">
                                                <div class="flex-1 campo-obligatorio">Rutas en <strong>{{ item.key
                                                        }}</strong> y por tráfico a servir:</div>
                                                <div class="flex-1">
                                                    <input type="text" class="form-control" formControlName="ruta"
                                                        [class.control-invalid]="formInvalidForm(item.value,'ruta')" />
                                                </div>
                                            </div>
                                            <div class="d-flex flex-row mt-2">
                                                <div class="flex-1 campo-obligatorio">Itinerarios en <strong>{{ item.key
                                                        }}</strong> y por tráfico a servir:</div>
                                                <div class="flex-1">
                                                    <input type="text" class="form-control" formControlName="itinerario"
                                                        [class.control-invalid]="formInvalidForm(item.value,'itinerario')" />
                                                </div>
                                            </div>
                                            <div class="d-flex flex-row mt-2">
                                                <div class="flex-1 campo-obligatorio">Frecuencias en <strong>{{ item.key
                                                        }}</strong> y por tráfico a servir:</div>
                                                <div class="flex-1">
                                                    <input type="text" class="form-control  text-center w-25"
                                                        maxlength="50" #inputFrecuencia formControlName="frecuencia"
                                                        [class.control-invalid]="formInvalidForm(item.value,'frecuencia')" />
                                                </div>
                                            </div>
                                            <hr class="w-100">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--fin DSTT-017-->
                        </div>
                    </ng-template>
</div>
</div>
                </div>
                <div  [disabled]="a_Seccion2FG.disabled" ngbAccordionItem="seccion-2">
                    <h2 ngbAccordionHeader>
                        
                            <button ngbAccordionButton>II. COMPLETAR
                                SEGÚN LOS REQUISITOS DEL PROCEDIMIENTO: DSTT-023</button>
                        </h2>
                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div formGroupName="a_Seccion2FG">
                            <!--si es DSTT-017-->
                            <div class="row">
                                <div class="col-lg-12 d-flex" formArrayName="a_s2_PaisesOperarFA">
                                    <div class="campo-obligatorio d-flex align-self-center">
                                        Países con los que se pretende operar:
                                    </div>

                                    <div class="contenedor-check-paises"
                                        [class.control-invalid]="formInvalid(a_s2_PaisesOperarFA)">
                                        <div *ngFor="let item of a_s2_PaisesOperarFA.controls; let i=index">
                                            <div [formGroupName]="i">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" id="inpCheckPOS2{{ i }}"
                                                        type="checkbox" formControlName="checked">
                                                    <label class="form-check-label" for="inpCheckPOS2{{ i }}">{{
                                                        item.get('text').value }}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-5 d-flex flex-column">
                                    <div class="d-flex align-items-center">
                                        <div class="campo-obligatorio flex-1">Origen:</div>
                                        <div class="flex-1">
                                            <span class="form-control" disabled>Perú</span>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center mt-3">
                                        <div class="campo-obligatorio flex-1">Destino:</div>
                                        <div class="flex-1">
                                            <select class="form-select" formControlName="a_s2_DestinoFC"
                                                [class.control-invalid]="formInvalid(a_s2_DestinoFC)">
                                                <option value="">Seleccione</option>
                                                <option *ngFor="let item of listaPaises" [value]="item.value">{{
                                                    item.text
                                                    }}</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mt-3">
                                        <div class="campo-obligatorio flex-1">
                                            Ciudades a Operar:
                                        </div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control text-uppercase"
                                                formControlName="a_s2_CiudadesOperarFC"
                                                [class.control-invalid]="formInvalid(a_s2_CiudadesOperarFC)" />
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-7">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-1 campo-obligatorio">Número de frecuencias:</div>
                                        <div class="d-flex flex-1">
                                            <div class="flex-1 me-1">
                                                <select class="form-select" (change)="changeNumeroFrecuencia($event)"
                                                    formControlName="a_s2_FrecuenciaFC"
                                                    [class.control-invalid]="formInvalid(a_s2_FrecuenciaFC)">
                                                    <option value="">Seleccione</option>
                                                    <option value="Diario">Diario</option>
                                                    <option value="Semanal">Semanal</option>
                                                    <option value="Mensual">Mensual</option>
                                                </select>
                                            </div>
                                            <div class="flex-1 ms-1">
                                                <input type="text" class="form-control text-center" #inputFrecuencia
                                                    maxlength="2" (input)="soloNumeros($event)"
                                                    formControlName="a_s2_NumeroFrecuenciaFC"
                                                    [class.control-invalid]="formInvalid(a_s2_NumeroFrecuenciaFC)">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center mt-3">
                                        <div class="flex-1 campo-obligatorio">Horarios de salida:</div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control text-uppercase"
                                                formControlName="a_s2_HorarioSalidaFC"
                                                [class.control-invalid]="formInvalid(a_s2_HorarioSalidaFC)" />
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center mt-3">
                                        <div class="flex-1 campo-obligatorio">Tiempo promedio de viaje:</div>
                                        <div class="flex-1 d-flex align-items-center">
                                            <input type="text" class="form-control w-25 text-center me-2" maxlength="2"
                                                (input)="soloNumeros($event)"
                                                formControlName="a_s2_TiempoPromedioViajeFC"
                                                [class.control-invalid]="formInvalid(a_s2_TiempoPromedioViajeFC)">
                                            hrs
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--fin DSTT-017-->
                        </div>
                    </ng-template>
</div>
</div>
                </div>
                <div  [disabled]="a_Seccion3FG.disabled" ngbAccordionItem="seccion-3">
                    <h2 ngbAccordionHeader >
                        
                            <button ngbAccordionButton>III. REGISTRAR
                                FLOTA VEHICULAR (PROCEDIMIENTOS: DSTT-016, DSTT-017, DSTT-018, DSTT-019, DSTT-020,
                                DSTT-023, DSTT-024)</button>
                        </h2>
                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div formGroupName="a_Seccion3FG">
                            <!--si es DSTT-016, DSTT-017, DSTT-018, DSTT-019, DSTT-020, DSTT-023, DSTT-024-->
                            <div class="row">
                                <div class="col-lg-12 mb-3 text-justify">
                                    Relación de vehículos ofertados, marcar con un aspa (X) los que corresponden a
                                    Leasing (Contrato de Arrendamiento)
                                </div>

                                <div class="col-lg-4 d-flex">
                                    <div class="d-flex flex-2 flex-column justify-content-between">
                                        <div class="d-flex">
                                            <div class="flex-1 campo-obligatorio">Placa de rodaje:</div>
                                            <div class="flex-1">
                                                <div class="input-group">
                                                    <input type="text" class="form-control text-uppercase"
                                                        (input)="changePlacaRodaje()" maxlength="6"
                                                        formControlName="a_s3_PlacaRodajeFC" />
                                                        <button class="btn btn-outline-secondary"
                                                            [disabled]="a_s3_PlacaRodajeFC.value?.trim()?.length !== 6"
                                                            type="button" (click)="buscarPlacaRodaje()">
                                                            <i class="fas fa-search"></i>
                                                        </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex">
                                            <div class="flex-1 campo-obligatorio">CITV:</div>
                                            <div class="flex-2">
                                                <!--<input type="text" class="form-control" formControlName="a_s3_CitvFC"
                                                    [readonly]="true" />-->
                                                <select class="form-select" formControlName="a_s3_CitvFC" disabled> <!--disabled-->
                                                    <option *ngFor="let item of listaPlacaNumero; let i = index" [value]="item">{{ item }}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-8 d-flex flex-column">
                                    <div class="d-flex">
                                        <div class="col-lg-6" *ngIf="!this.codigoProcedimientoTupa=='DSTT-016'">
                                            <div class="d-flex">
                                                <div class="flex-1">Nro de Vin.:</div>
                                                <div class="flex-1">
                                                    <input type="text" class="form-control"
                                                        formControlName="a_s3_NroVin" [readonly]="true" />
                                                </div>
                                            </div>
                                            <!--
                                            <div class="d-flex mt-3">
                                                <div class="flex-1 campo-obligatorio">Chasis:</div>
                                                <div class="flex-1">
                                                    <input type="text" class="form-control"
                                                        formControlName="a_s3_ChasisFC" [readonly]="true" />
                                                </div>
                                            </div>-->
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="d-flex">
                                                <div class="flex-1 campo-obligatorio">SOAT:</div>
                                                <div class="flex-2">
                                                    <input type="text" class="form-control text-uppercase"
                                                        formControlName="a_s3_SoatFC" [readonly]="true" />
                                                </div>
                                            </div>
                                        </div>
                                        <!--<div class="col-lg-6">
                                            <div class="d-flex">
                                                <div class="flex-1 campo-obligatorio">Marca:</div>
                                                <div class="flex-2">
                                                    <input type="text" class="form-control"
                                                        formControlName="a_s3_MarcaFC" [readonly]="true">
                                                </div>
                                            </div>
                                            <div class="d-flex mt-3">
                                                <div class="flex-1 campo-obligatorio">Modelo:</div>
                                                <div class="flex-2">
                                                    <input type="text" class="form-control "
                                                        formControlName="a_s3_ModeloFC" [readonly]="true">
                                                </div>
                                            </div>
                                        </div>-->
                                    </div>

                                    <div class="d-flex mt-3">
                                        <div class="col-lg-10 d-flex">
                                            <!--<div class="d-flex flex-1 align-items-center justify-content-between">
                                                <div class="flex-1">C.A.F</div>
                                                <div class="flex-1 mt-2">Vinculado</div>
                                            </div>-->
                                            <div class="d-flex flex-1 align-items-center">
                                                <div class="d-flex">
                                                    <div class="flex-1 mt-2 me-3 ms-3">C.A.F</div>
                                                    <ui-switch (change)="onChangeCaf($event)"
                                                        formControlName="a_s3_CafFC">
                                                    </ui-switch>
                                                    <div class="flex-1 mt-2 me-3 ms-3">Vinculado</div>
                                                    <ui-switch (change)="onChangeVinciulado($event)"
                                                        formControlName="a_s3_VinculadoFC"></ui-switch>
                                                </div>
                                                <button class="btn btn-danger btn-sm ms-2"
                                                    *ngIf="visibleButtonCarf" (click)="inputFileCaf.click()">
                                                    <i class="fas fa-upload"></i>
                                                    Adjuntar {{ caf_vinculado }}
                                                </button>
                                                <div>
                                                    <input type="file" class="d-none" #inputFileCaf
                                                        accept="application/pdf" (change)="onChangeInputCaf($event)" />
                                                    <i class="far fa-file-pdf text-danger fa-2x ms-3"
                                                        title="Vista previa"
                                                        *ngIf="filePdfCafSeleccionado || filePdfCafPathName"
                                                        (click)="vistaPreviaCaf()"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <!--<div class="col-lg-6 d-flex">
                                            <div class="d-flex flex-1 flex-column">
                                                <div class="flex-1">C.A.F</div>
                                                <div class="flex-1 mt-2">Vinculado</div>
                                            </div>
                                            <div class="d-flex flex-1 align-items-center justify-content-between">
                                                <div class="d-flex flex-column">
                                                    <ui-switch (change)="onChangeCaf($event)"
                                                        formControlName="a_s3_CafFC">
                                                    </ui-switch>
                                                    <ui-switch (change)="onChangeVinciulado($event)"
                                                        formControlName="a_s3_VinculadoFC"></ui-switch>
                                                </div>
                                                <button class="btn btn-danger btn-sm ms-2 text-center"
                                                    *ngIf="visibleButtonCarf" (click)="inputFileCaf.click()">
                                                    <i class="fas fa-upload"></i>
                                                    Adjuntar {{ caf_vinculado }}
                                                </button>
                                                <div>
                                                    <input type="file" class="d-none" #inputFileCaf
                                                        accept="application/pdf" (change)="onChangeInputCaf($event)" />
                                                    <i class="far fa-file-pdf text-danger fa-2x ms-3"
                                                        title="Vista previa"
                                                        *ngIf="filePdfCafSeleccionado || filePdfCafPathName"
                                                        (click)="vistaPreviaCaf()"></i>
                                                </div>
                                            </div>
                                        </div>-->


                                        <div class="col-lg-2 d-flex flex-column align-self-center">
                                            <div class="d-flex flex-column flex-1">
                                                <button class="btn btn-danger flex-1" (click)="agregarFlotaVehicular()">
                                                    <div *ngIf="indexEditTabla === -1; else elseBlock">
                                                        <i class="fas fa-plus-circle"></i>
                                                        Agregar
                                                    </div>
                                                    <ng-template #elseBlock>
                                                        <i class="fas fa-pencil-alt"></i>
                                                        Modificar
                                                    </ng-template>
</div>
</div>
                                                </button>

                                                <button *ngIf="indexEditTabla !== -1"
                                                    class="btn btn-warning flex-1 btn-sm mt-1 anexo001-c17-btn-cancelar"
                                                    (click)="cancelarFlotaVehicular()">
                                                    Cancelar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-12 table-responsive">
                                    <table class="table table-bordered table-sm">
                                        <thead class="tabla-header-mtc">
                                            <th>N°</th>
                                            <th>Placa de rodaje</th>
                                            <th>SOAT</th>
                                            <th>CITV</th>
                                            <th>Nro. Vin</th>
                                            <th>C.A.F</th>
                                            <th>Vinculado</th>
                                            <th>Acciones</th>
                                        </thead>
                                        <tbody *ngIf="listaFlotaVehicular.length > 0; else sinRegistros">
                                            <tr class="text-center" [class.registro-edit]="indexEditTabla === i"
                                                *ngFor="let item of listaFlotaVehicular; let i = index">
                                                <td class="text-center">{{ i + 1 }}</td>
                                                <td>{{ item.placaRodaje }}</td>
                                                <td>{{ item.soat }}</td>
                                                <td>{{ item.citv }}</td>
                                                <td>{{ item.nroVinculado }}</td>
                                                <td *ngIf="item.caf === false; else pdfcaf"></td>
                                                <ng-template #pdfcaf>
                                                    <td class="text-center">
                                                        <i class="far fa-file-pdf" (click)="verPdfCafGrilla(item)"></i>
                                                    </td>
                                                </ng-template>
                                                <td *ngIf="item.vinculado === false; else pdfvinculado"></td>
                                                <ng-template #pdfvinculado>
                                                    <td class="text-center">
                                                        <i class="far fa-file-pdf" (click)="verPdfCafGrilla(item)"></i>
                                                    </td>
                                                </ng-template>
                                                <td class="text-center">
                                                    <!--<i class="far fa-edit pe-2 text-primary cursor-pointer"
                                                        [class.opacity-icon]="indexEditTabla !== -1" title="Editar"
                                                        (click)="modificarFlotaVehicular(item, i)"></i>-->
                                                    <i class="far fa-trash-alt ps-2 text-danger cursor-pointer"
                                                        [class.opacity-icon]="indexEditTabla !== -1" title="Eliminar"
                                                        (click)="eliminarFlotaVehicular(item, i)"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <ng-template #sinRegistros>
                                            <tbody>
                                                <tr>
                                                    <td colspan="8" class="text-center">No se encontraron registros
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </ng-template>
                                    </table>
                                </div>
                            </div>
                            <!--fin DSTT-016, DSTT-017, DSTT-018, DSTT-019, DSTT-020, DSTT-023, DSTT-024-->
                        </div>
                    </ng-template>
                </div>
                <div  [disabled]="a_Seccion4FG.disabled" ngbAccordionItem="seccion-4">
                    <h2 ngbAccordionHeader >
                        
                            <button ngbAccordionButton>IV. RELACIÓN DE
                                TRIPULANTES (COMPLETAR SOLO PARA DSTT-023)</button>
                        </h2>
                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div formGroupName="a_Seccion4FG">
                            <!--si es DSTT-023-->
                            <div class="row">
                                <div class="col-lg-12 text-justify">
                                    Los suscritos manifiestan con carácter de declaración jurada que indique que cumple
                                    con lo establecido en los numerales 37.4, 37.5 y 37.7 del artículo 37° del
                                    Reglamento Nacional de Administración de Transportes (RNAT), sujetandose a lo
                                    señalado en el artículo 34 (3) del Texto Unico Ordenado de la Ley N° 27444-Ley del
                                    Procedimiento Administrativo General, aprobado por Decreto Supremo N° 004-2019-JUS y
                                    demás normas asociadas.
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-12">
                                    Relación de la tripulación:
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-4 d-flex flex-column">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-1 campo-obligatorio me-2">Tipo de Documento:</div>
                                        <div class="flex-1">
                                            <select class="form-select" (change)="a_s4_NumeroDocumentoFC.reset('')"
                                                formControlName="a_s4_TipoDocumentoFC">
                                                <option value=''>Seleccione</option>
                                                <option *ngFor="let item of listaTiposDocumentos;" [value]="item.id">{{
                                                    item.documento }}</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mt-3">
                                        <div class="flex-1 campo-obligatorio me-2">Número de Documento:</div>
                                        <div class="flex-1">
                                            <div class="input-group">
                                                <input type="text" class="form-control text-uppercase"
                                                    (input)="inputNumeroDocumentoS4($event)"
                                                    [readonly]="a_s4_TipoDocumentoFC.value === ''"
                                                    [maxlength]="getMaxLengthNumDocTripulacion()"
                                                    formControlName="a_s4_NumeroDocumentoFC" />
                                                    <button class="btn btn-outline-secondary"
                                                        [disabled]="a_s4_NumeroDocumentoFC.value?.trim()?.length === 0"
                                                        type="button" (click)="buscarNumeroDocumentoTripulacion()">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 d-flex flex-column">
                                    <div class="d-flex align-items-center">
                                        <div class="campo-obligatorio me-2">Apellidos:</div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control" [readonly]="true"
                                                formControlName="a_s4_ApellidosFC" />
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mt-3">
                                        <div class="campo-obligatorio me-2">Nombres:</div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control" [readonly]="true"
                                                formControlName="a_s4_NombresFC" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 d-flex flex-column">
                                    <div class="d-flex">
                                        <div class="me-2">Licencia de Conducir:</div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control" formControlName="a_s4_LicenciaFC" />
                                        </div>
                                    </div>
                                    <div class="d-flex mt-3">
                                        <button class="btn btn-danger btn-sm flex-1" [disabled]="!seccion4Completo"
                                            (click)="agregarTripulacion()">
                                            <div *ngIf="indexEditTablaTripulacion === -1; else elseBlock">
                                                <i class="fas fa-plus-circle"></i>
                                                Agregar
                                            </div>
                                            <ng-template #elseBlock>
                                                <i class="fas fa-pencil-alt"></i>
                                                Modificar
                                            </ng-template>
</div>
</div>
                                        </button>

                                        <button *ngIf="indexEditTablaTripulacion !== -1"
                                            class="btn btn-warning btn-sm flex-1 ms-2 anexo003-b172-btn-cancelar"
                                            (click)="cancelarModificacionTripulacion()">
                                            Cancelar
                                        </button>
                                    </div>
                                </div>
                            </div>


                            <div class="row mt-3">
                                <div class="col-lg-12">
                                    <div class="table-responsive">

                                        <table class="table table-bordered">
                                            <thead class="tabla-header-mtc">
                                                <tr>
                                                    <th>N°</th>
                                                    <th>Apellidos y Nombres</th>
                                                    <th>Tipo de Documento</th>
                                                    <th>Número de Documento</th>
                                                    <th>Licencia de Conducir</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody *ngIf="listaTripulacion.length > 0; else sinRegistros">
                                                <tr class="text-center"
                                                    [class.registro-edit]="indexEditTablaTripulacion === i"
                                                    *ngFor="let item of listaTripulacion, let i = index">
                                                    <td>{{ i + 1}}</td>
                                                    <td class="text-start">
                                                        {{ item.apellidos + ' ' + item.nombres }}
                                                    </td>
                                                    <td>{{ item.tipoDocumento.documento }}</td>
                                                    <td>{{ item.numeroDocumento }}</td>
                                                    <td>{{ item.licencia }}</td>
                                                    <td>
                                                        <div *ngIf="validarRegistroDeFormulario(i, item)">
                                                            <i class="far fa-edit pe-2 text-primary cursor-pointer"
                                                                [class.opacity-icon]="indexEditTablaTripulacion !== -1"
                                                                title="Editar"
                                                                (click)="modificarTripulacion(item, i)"></i>
                                                            <i class="far fa-trash-alt ps-2 text-danger cursor-pointer"
                                                                [class.opacity-icon]="indexEditTablaTripulacion !== -1"
                                                                title="Eliminar" (click)="eliminarTripulacion(i)"></i>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <ng-template #sinRegistros>
                                                <tbody>
                                                    <tr>
                                                        <td colspan="6" class="text-center">No se encontraron registros
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </ng-template>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!--fin DSTT-023-->
                        </div>
                    </ng-template>
                </div>
                <div  [disabled]="a_Seccion5FG.disabled" ngbAccordionItem="seccion-5">
                    <h2 ngbAccordionHeader >
                        
                            <button ngbAccordionButton>V. RELACIÓN DE
                                PASAJEROS (COMPLETAR SOLO PARA DSTT-023)</button>
                        </h2>
                    <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                        <div formGroupName="a_Seccion5FG">
                            <!--si es DSTT-023-->
                            <div class="row">
                                <div class="col-lg-12 text-justify">
                                    Los suscritos manifiestan con carácter de declaración jurada que indique que cumple
                                    con lo establecido en los numerales 37.4, 37.5 y 37.7 del artículo 37° del
                                    Reglamento Nacional de Administración de Transportes (RNAT), sujetandose a lo
                                    señalado en el artículo 34 (3) del Texto Unico Ordenado de la Ley N° 27444-Ley del
                                    Procedimiento Administrativo General, aprobado por Decreto Supremo N° 004-2019-JUS y
                                    demás normas asociadas.
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-12">
                                    Relación de pasajeros:
                                </div>
                            </div>

                            <div class="row mt-3">

                                <div class="col-lg-5 d-flex flex-column">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-1 campo-obligatorio me-2">Tipo de Documento:</div>
                                        <div class="flex-1">
                                            <select class="form-select" (change)="a_s5_NumeroDocumentoFC.reset('')"
                                                formControlName="a_s5_TipoDocumentoFC">
                                                <option value=''>Seleccione</option>
                                                <option *ngFor="let item of listaTiposDocumentos;" [value]="item.id">{{
                                                    item.documento }}</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mt-3">
                                        <div class="flex-1 campo-obligatorio me-2">Número de Documento:</div>
                                        <div class="flex-1">
                                            <div class="input-group">
                                                <input type="text" class="form-control text-uppercase"
                                                    (input)="inputNumeroDocumentoS5($event)"
                                                    [readonly]="a_s5_TipoDocumentoFC.value === ''"
                                                    [maxlength]="getMaxLengthNumDocPasajeros()"
                                                    formControlName="a_s5_NumeroDocumentoFC" />
                                                    <button class="btn btn-outline-secondary"
                                                        [disabled]="a_s5_NumeroDocumentoFC.value?.trim()?.length === 0"
                                                        type="button" (click)="buscarNumeroDocumentoPasajeros()">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 d-flex flex-column">
                                    <div class="d-flex align-items-center">
                                        <div class="campo-obligatorio me-2">Apellidos:</div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control" [readonly]="true"
                                                formControlName="a_s5_ApellidosFC" />
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center mt-3">
                                        <div class="campo-obligatorio me-2">Nombres:</div>
                                        <div class="flex-1">
                                            <input type="text" class="form-control" [readonly]="true"
                                                formControlName="a_s5_NombresFC" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 d-flex flex-column">
                                    <div class="d-flex mt-3">
                                        <button class="btn btn-danger btn-sm flex-1" [disabled]="!seccion5Completo"
                                            (click)="agregarPasajeros()">
                                            <div *ngIf="indexEditTablaPasajeros === -1; else elseBlock">
                                                <i class="fas fa-plus-circle"></i>
                                                Agregar
                                            </div>
                                            <ng-template #elseBlock>
                                                <i class="fas fa-pencil-alt"></i>
                                                Modificar
                                            </ng-template>
</div>
</div>
                                        </button>

                                        <button *ngIf="indexEditTablaPasajeros !== -1"
                                            class="btn btn-warning btn-sm flex-1 ms-2 anexo003-b172-btn-cancelar"
                                            (click)="cancelarModificacionPasajeros()">
                                            Cancelar
                                        </button>
                                    </div>
                                </div>
                            </div>


                            <div class="row mt-3">
                                <div class="col-lg-12">
                                    <div class="table-responsive">

                                        <table class="table table-bordered">
                                            <thead class="tabla-header-mtc">
                                                <tr>
                                                    <th>N°</th>
                                                    <th>Apellidos y Nombres</th>
                                                    <th>Tipo de Documento</th>
                                                    <th>Número de Documento</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody *ngIf="listaPasajeros.length > 0; else sinRegistros">
                                                <tr class="text-center"
                                                    [class.registro-edit]="indexEditTablaPasajeros === i"
                                                    *ngFor="let item of listaPasajeros, let i = index">
                                                    <td>{{ i + 1}}</td>
                                                    <td class="text-start">
                                                        {{ item.apellidos + ' ' + item.nombres }}
                                                    </td>
                                                    <td>{{ item.tipoDocumento.documento }}</td>
                                                    <td>{{ item.numeroDocumento }}</td>
                                                    <td>
                                                        <div *ngIf="validarRegistroDeFormulario(i, item)">
                                                            <i class="far fa-edit pe-2 text-primary cursor-pointer"
                                                                [class.opacity-icon]="indexEditTablaPasajeros !== -1"
                                                                title="Editar"
                                                                (click)="modificarPasajeros(item, i)"></i>
                                                            <i class="far fa-trash-alt ps-2 text-danger cursor-pointer"
                                                                [class.opacity-icon]="indexEditTablaPasajeros !== -1"
                                                                title="Eliminar" (click)="eliminarPasajeros(i)"></i>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <ng-template #sinRegistros>
                                                <tbody>
                                                    <tr>
                                                        <td colspan="6" class="text-center">No se encontraron registros
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </ng-template>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!--fin DSTT-023-->
                        </div>
                    </ng-template>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="modal-footer anexo">
    <div class="row">
        <div class="col-lg-12 d-flex">
            <div class="flex-1">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-secondary" [disabled]="idAnexo === 0" (click)="descargarPdf()">
                        <i class="far fa-eye"></i>
                        Visualizar
                    </button>
                </div>
            </div>
            <div class="flex-1 text-end">
                <button class="btn btn-success" (click)="guardarAnexo()" [disabled]="anexoFG.invalid">
                    <i class="far fa-save"></i>
                    {{
                    (idAnexo === 0 ? 'Grabar' : 'Modificar')
                    }}
                </button>
            </div>
        </div>
    </div>
</div>