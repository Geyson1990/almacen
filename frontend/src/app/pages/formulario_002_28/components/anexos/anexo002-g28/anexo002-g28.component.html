<div class="modal-header anexo bg-danger text-white">
    <h4 class="modal-title">{{ this.codigoProcedimientoTupa}} {{ this.descProcedimientoTupa}}</h4>
    <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.close(graboUsuario)">
      
  </button>
</div>
<div class="modal-body anexo">
    <!-- <form novalidate [formGroup]="formAnexo" (ngSubmit)="save()"> -->
    <form novalidate [formGroup]="formAnexo">
        <div class="center">
            <h6>ANEXO 002-G/28 MODIFICACIÓN DE CARACTERÍSTICAS TÉCNICAS Y/O CONDICIÓN ESENCIAL (Frec. o Canal) SERVICIOS DE RADIODIFUSIÓN</h6>
        </div>
        <div ngbAccordion #acc="ngbAccordion" activeIds="ngb-anexo002-g28-seccion-1, ngb-anexo002-g28-seccion-2">

            <div ngbAccordionItem="ngb-anexo002-g28-seccion-1" [collapsed]="false">
                <h2 ngbAccordionHeader >
                    
                        <button ngbAccordionButton>I. DATOS DE LA AUTORIZACIÓN</button>
                    </h2>
                <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>

                    <div class="row text-justify mt-2">
                        <div class="col-sm-1"></div>
                        <div class="col-sm-4  form-check">
                            <input type="radio" class="form-check-input radio-xl" id="chkFrecuenciaModulada" formControlName="s1_autorizacionModalidad" value="frecuenciaModulada" disabled>
                            <label class="form-check-label" for="chkFrecuenciaModulada">Frecuencia Modulada (FM)</label>
                        </div>
                        <div class="col-sm-4  form-check">
                            <input type="radio" class="form-check-input radio-xl" id="chkOndaCortaTropical" formControlName="s1_autorizacionModalidad" value="ondaCortaTropical" disabled>
                            <label class="form-check-label" for="chkOndaCortaTropical">Onda Corta Tropical (OCT)</label>
                        </div>
                        <div class="col-sm-3  form-check">
                            <input type="radio" class="form-check-input radio-xl" id="chkTelevisionVHF" formControlName="s1_autorizacionModalidad" value="televisionVHF" disabled>
                            <label class="form-check-label" for="chkTelevisionVHF">Televisión en VHF</label>
                        </div>
                    </div>
                    <div class="row text-justify mt-2">
                        <div class="col-sm-1"></div>
                        <div class="col-sm-4  form-check">
                            <input type="radio" class="form-check-input radio-xl" id="chkSonoraOndaMedia" formControlName="s1_autorizacionModalidad" value="ondaMedia" disabled>
                            <label class="form-check-label" for="chkSonoraOndaMedia">Sonora Onda Media (OM)</label>
                        </div>
                        <div class="col-sm-4  form-check">
                            <input type="radio" class="form-check-input radio-xl" id="chkOndaCortaInternacional" formControlName="s1_autorizacionModalidad" value="ondaCortaInternacional" disabled>
                            <label class="form-check-label" for="chkOndaCortaInternacional">Onda Corta Internacional (OCI)</label>
                        </div>
                        <div class="col-sm-3  form-check">
                            <input type="radio" class="form-check-input radio-xl" id="chkTelevisionUHF" formControlName="s1_autorizacionModalidad" value="televisionUHF" disabled>
                            <label class="form-check-label" for="chkTelevisionUHF">Televisión en UHF</label>
                        </div>
                    </div>
                    <div class="row mt-3 align-items-center">
                        <label class="col-sm-3 col-form-label campo-obligatorio">Autorizada mediante: Resolución ( RD / RVM ) N°</label>
                        <div class="col-md-3">
                            <input type="text" class="form-control" formControlName="s1_nResolucionAutorizada" [class.control-invalid]="formInvalid('s1_nResolucionAutorizada')">
                        </div>
                        <label class="col-sm-3 col-form-label campo-obligatorio">En la frecuencia o canal</label>
                        <div class="col-md-3">
                            <input type="text" class="form-control" formControlName="s1_enFrecuenciaCanal" [class.control-invalid]="formInvalid('s1_enFrecuenciaCanal')">
                        </div>
                    </div>
                </ng-template>
</div>
</div>
            </div>

            <div ngbAccordionItem="ngb-anexo002-g28-seccion-2" [collapsed]="false">
                <h2 ngbAccordionHeader>
                    
                        <button ngbAccordionButton>II. TRÁMITE SOLICITADO (Marcar lo solicitado)</button>
                    </h2>
                <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                    <div class="row text-justify ps-4 mt-2 mb-4">
                        <div class="col-sm-5  form-check">
                            <input type="checkbox" class="form-check-input checkbox-xl" id="chkCambioUbicacion" formControlName="s2_servCambioUbicacion" (change)="onChangeTramiteSolicitado()">
                            <label class="form-check-label" for="chkCambioUbicacion">1. Cambio de Ubicación de Planta Transmisora</label>
                        </div>
                        <div class="col-sm-3  form-check">
                            <input type="checkbox" class="form-check-input checkbox-xl" id="chkAumentoPotencia" formControlName="s2_servAumentoPotencia" (change)="onChangeTramiteSolicitado()">
                            <label class="form-check-label" for="chkAumentoPotencia">2. Aumento de Potencia</label>
                        </div>
                        <div class="col-sm-4  form-check">
                            <input type="checkbox" class="form-check-input checkbox-xl" id="chkCambioFrecuencia" formControlName="s2_servCambioFrecuencia" (change)="onChangeTramiteSolicitado()">
                            <label class="form-check-label" for="chkCambioFrecuencia">3. Cambio de Frecuencia / canal</label>
                        </div>
                    </div>
                </ng-template>
</div>
</div>
            </div>

            <div ngbAccordionItem="ngb-anexo002-g28-seccion-3" [collapsed]="false">
                <h2 ngbAccordionHeader>
                    
                        <button ngbAccordionButton>III. COMPLETAR LA INFORMACIÓN QUE CORRESPONDA</button>
                    </h2>
                <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                    <div class="row mb-2">
                        <div class="col-sm-4 p-1">
                            <fieldset class="fieldset pr-0 mb-4">
                                <legend class="legend mb-0">Frecuencia o canal</legend>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="frCanal_Asignado" class="col-sm-6 col-form-label">Asignada(o):</label>
                                        <div class="col-sm-6">
                                            <input type="number" name="frCanal_Asignado" formControlName="s3_frCanal_Asignado" class="form-control" [class.control-invalid]="formInvalid('s3_frCanal_Asignado')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="frCanal_Solicitado" class="col-sm-6 col-form-label">Solicitada(o):</label>
                                        <div class="col-sm-6">
                                            <input type="number" name="frCanal_Solicitado" formControlName="s3_frCanal_Solicitado" class="form-control" [class.control-invalid]="formInvalid('s3_frCanal_Solicitado')">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="fieldset pr-0">
                                <legend class="legend mb-0">Potencia del Transmisor (KW)</legend>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="potencia_Autorizada" class="col-sm-6 col-form-label">Autorizada:</label>
                                        <div class="col-sm-6">
                                            <input type="number" name="potencia_Autorizada" formControlName="s3_potencia_Autorizada" class="form-control" [class.control-invalid]="formInvalid('s3_potencia_Autorizada')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="potencia_Solicitada" class="col-sm-6 col-form-label">Solicitada:</label>
                                        <div class="col-sm-6">
                                            <input type="number" name="potencia_Solicitada" formControlName="s3_potencia_Solicitada" class="form-control" [class.control-invalid]="formInvalid('s3_potencia_Solicitada')">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="col-sm-5 p-1">
                            <fieldset class="fieldset pr-0">
                                <legend class="legend mb-0">Sistema Irradiante</legend>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="sIrrad_Tipo" class="col-sm-4 col-form-label">Tipo:</label>
                                        <div class="col-sm-8">
                                            <input type="text" name="sIrrad_Tipo" formControlName="s3_sIrrad_Tipo" class="form-control" [class.control-invalid]="formInvalid('s3_sIrrad_Tipo')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="sIrrad_GananciaMaxRad" class="col-sm-7 col-form-label">Ganancia en la Dirección de Máxima Radiación (dB):</label>
                                        <div class="col-sm-5">
                                            <input type="number" name="sIrrad_GananciaMaxRad" formControlName="s3_sIrrad_GananciaMaxRad" class="form-control" [class.control-invalid]="formInvalid('s3_sIrrad_GananciaMaxRad')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="sIrrad_AcimutMaxRad" class="col-sm-7 col-form-label">Acimut de máxima radiación (grados):</label>
                                        <div class="col-sm-5">
                                            <input type="number" name="sIrrad_AcimutMaxRad" formControlName="s3_sIrrad_AcimutMaxRad" class="form-control" [class.control-invalid]="formInvalid('s3_sIrrad_AcimutMaxRad')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="sIrrad_InclinacionHaz" class="col-sm-7 col-form-label">Inclinación del Haz – Tilt (grados):</label>
                                        <div class="col-sm-5">
                                            <input type="number" name="sIrrad_InclinacionHaz" formControlName="s3_sIrrad_InclinacionHaz" class="form-control" [class.control-invalid]="formInvalid('s3_sIrrad_InclinacionHaz')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="sIrrad_AlturaCentroRad" class="col-sm-7 col-form-label">Altura del Centro de Radiación (m.s.n.m.):</label>
                                        <div class="col-sm-5">
                                            <input type="number" name="sIrrad_AlturaCentroRad" formControlName="s3_sIrrad_AlturaCentroRad" class="form-control" [class.control-invalid]="formInvalid('s3_sIrrad_AlturaCentroRad')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="sIrrad_AlturaTorre" class="col-sm-7 col-form-label">Altura de la Torre (m):</label>
                                        <div class="col-sm-5">
                                            <input type="number" name="sIrrad_AlturaTorre" formControlName="s3_sIrrad_AlturaTorre" class="form-control" [class.control-invalid]="formInvalid('s3_sIrrad_AlturaTorre')">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                        </div>
                        <div class="col-sm-3 p-1">
                            <fieldset class="fieldset pr-0">
                                <legend class="legend mb-0">Pérdidas (dB):</legend>
                                <div class="row align-items-center">
                                    <div class="col-sm-12 row mb-2 ">
                                        <label for="perdida_ConectorCableDist" class="col-sm-12 col-form-label">Conectores, cables y distribuidor:</label>
                                        <div class="col-sm-12">
                                            <input type="number" name="perdida_ConectorCableDist" formControlName="s3_perdida_ConectorCableDist" class="form-control" [class.control-invalid]="formInvalid('s3_perdida_ConectorCableDist')">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                        </div>
                    </div>

                    <div class="row mb-2 align-items-center">
                        <label class="col-sm-3 col-form-label">UBICACIÓN / DIRECCIÓN</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" formControlName="s3_ubicacionDireccion" [class.control-invalid]="formInvalid('s3_ubicacionDireccion')">
                        </div>
                    </div>

                    <div class="row align-items-center">
                        <div class="col-sm-4">
                            <div class="row mb-2 align-items-center">
                                <label class="col-sm-5 col-form-label">Departamento:</label>
                                <div class="col-sm-7">
                                    <select id="departamento" class="form-select form-select-sm" (change)="onChangeProvincias()" formControlName="s3_departamento" [class.control-invalid]="formInvalid('s3_departamento')">
                                        <option value=''>Seleccione</option>
                                        <option *ngFor="let item of listaDepartamentos" [value]="item.value">{{ item.text }}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="row mb-2 align-items-center">
                                <label class="col-sm-5 col-form-label">Provincia:</label>
                                <div class="col-sm-7">
                                    <select class="form-select form-select-sm" (change)="onChangeDistritos()" formControlName="s3_provincia" [class.control-invalid]="formInvalid('s3_provincia')">
                                        <option value=''>Seleccione</option>
                                        <option *ngFor="let item of listaProvincias" [value]="item.value">{{ item.text }}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="row mb-2 align-items-center">
                                <label class="col-sm-5 col-form-label">Distrito:</label>
                                <div class="col-sm-7">
                                    <select class="form-select form-select-sm" formControlName="s3_distrito" [class.control-invalid]="formInvalid('s3_distrito')">
                                        <option value=''>Seleccione</option>
                                        <option *ngFor="let item of listaDistritos" [value]="item.value">{{ item.text }}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-2">
                        <div class="col-sm-6 p-1">
                            <fieldset class="fieldset pr-0">
                                <legend class="legend mb-0">Coordenadas Geográficas en WGS84</legend>
                                <div class="row">
                                    <div class="col-sm-6 d-flex">
                                        <label class="col-form-label mr-sm-3">L.O.:</label>
                                        <input type="number" name="coordWGS84LO_grados" formControlName="s3_coordWGS84LO_grados" [class.control-invalid]="formInvalid('s3_coordWGS84LO_grados')" max="89.99" class="form-control text-compact mb-2"><span class="d-inline mr-sm-2">°</span>
                                        <input type="number" name="coordWGS84LO_minutos" formControlName="s3_coordWGS84LO_minutos" [class.control-invalid]="formInvalid('s3_coordWGS84LO_minutos')" max="59.99" class="form-control text-compact mb-2">
                                        <span class="d-inline mr-sm-2">'</span>
                                        <input type="number" name="coordWGS84LO_segundos" formControlName="s3_coordWGS84LO_segundos" [class.control-invalid]="formInvalid('s3_coordWGS84LO_segundos')" max="59.99" class="form-control text-compact mb-2">
                                        <span class="d-inline mr-sm-2">"</span>
                                    </div>
                                    <div class="col-sm-6 d-flex">
                                        <label class="col-form-label mr-sm-3">L.S.:</label>
                                        <input type="number" name="coordWGS84LS_grados" formControlName="s3_coordWGS84LS_grados" [class.control-invalid]="formInvalid('s3_coordWGS84LS_grados')" max="89.99" class="form-control text-compact mb-2"><span class="d-inline mr-sm-2">°</span>
                                        <input type="number" name="coordWGS84LS_minutos" formControlName="s3_coordWGS84LS_minutos" [class.control-invalid]="formInvalid('s3_coordWGS84LS_minutos')" max="59.99" class="form-control text-compact mb-2">
                                        <span class="d-inline mr-sm-2">'</span>
                                        <input type="number" name="coordWGS84LS_segundos" formControlName="s3_coordWGS84LS_segundos" [class.control-invalid]="formInvalid('s3_coordWGS84LS_segundos')" max="59.99" class="form-control text-compact mb-2">
                                        <span class="d-inline mr-sm-2">"</span>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="col-sm-6 p-1">
                            <fieldset class="fieldset pr-0">
                                <legend class="legend mb-0">ENLACE ESTUDIO – PLANTA TRANSMISORA:</legend>

                                <div class="row text-justify ps-4 mt-2 mb-3">
                                    <div class="col-sm-4  form-check">
                                        <input type="radio" class="form-check-input radio-xl" id="chkPlanta_lineaFisica" formControlName="s3_plantaTransmisora" [class.control-invalid]="formInvalid('s3_plantaTransmisora')" value="lineaFisica">
                                        <label class="form-check-label" for="chkPlanta_lineaFisica">Línea Física</label>
                                    </div>
                                    <div class="col-sm-4  form-check">
                                        <input type="radio" class="form-check-input radio-xl" id="chkPlanta_radioElectrico" formControlName="s3_plantaTransmisora" [class.control-invalid]="formInvalid('s3_plantaTransmisora')" value="radioElectrico">
                                        <label class="form-check-label" for="chkPlanta_radioElectrico">Radioeléctrico</label>
                                    </div>
                                    <div class="col-sm-4  form-check">
                                        <input type="radio" class="form-check-input radio-xl" id="chkPlanta_satelital" formControlName="s3_plantaTransmisora" [class.control-invalid]="formInvalid('s3_plantaTransmisora')" value="satelital">
                                        <label class="form-check-label" for="chkPlanta_satelital">Satelital</label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>

                    <div class="col-sm-12 mt-3">
                        <li>
                            Diagrama de Radiación Horizontal Polar del Arreglo de Antenas
                            <input type="file" class="d-none" #inputFileDiagrama accept="application/pdf" (change)="onChangeInputDiagrama($event)">
                            <div class="mb-3 mt-3 d-inline">
                                <button class="btn btn-danger" type="button" (click)="inputFileDiagrama.click($event)">
                                    <i class="fas fa-upload"></i> Adjuntar
                                </button>
                                <i class="far fa-file-pdf text-danger fa-2x ms-3" title="Vista previa" *ngIf="filePdfDiagramaSeleccionado !== null || filePdfDiagramaPathName !== null" (click)="vistaPreviaDiagrama()"></i>
                            </div>
                        </li>
                    </div>
                </ng-template>
</div>
</div>
            </div>
            <div ngbAccordionItem="ngb-anexo002-g28-seccion-4" [collapsed]="false">
                <h2 ngbAccordionHeader>
                    
                        <button ngbAccordionButton>IV PROYECTO DEL PERFIL TÉCNICO AUTORIZADO POR:</button>
                    </h2>
                <div ngbAccordionCollapse>
<div ngbAccordionBody>
<ng-template>
                    <div class="row">
                        <div class="col-sm-6 text-center mt-5" *ngIf="false">FIRMA DEL TITULAR O REPRESENTANTE LEGAL </div>
                        <div class="col-sm-10 text-center mt-2">
                            <div class="row mb-2">
                                <div class="col-sm-10">DATOS DE CONTACTO DEL INGENIERO</div>
                            </div>
                            <div class="row text-start mb-2">
                                <label class="col-sm-2 col-form-label campo-obligatorio">Teléfono:</label>
                                <div class="col-md-3">
                                    <input type="text" class="form-control" formControlName="s4_telefonoIngeniero" [class.control-invalid]="formInvalid('s4_telefonoIngeniero')">
                                </div>
                                <label class="col-sm-2 col-form-label campo-obligatorio">E-mail:</label>
                                <div class="col-md-5">
                                    <input type="text" class="form-control" formControlName="s4_emailIngeniero" [class.control-invalid]="formInvalid('s4_emailIngeniero')">
                                </div>
                            </div>
                            <div class="row text-start mb-2">
                            </div>
                        </div>
                    </div>
                    <li *ngIf="false">
                        Adjuntar Firmas
                        <input type="file" class="d-none" accept="application/pdf">
                        <div class="mb-3 mt-3 d-inline">
                            <button class="btn btn-danger" type="button">
                                <i class="fas fa-upload"></i> Adjuntar
                            </button>
                            <i class="far fa-file-pdf text-danger fa-2x ms-3" title="Vista previa" *ngIf="filePdfDiagramaSeleccionado !== null || filePdfDiagramaPathName !== null"></i>
                        </div>
                    </li>
                </ng-template>
</div>
</div>
            </div>
        </div>

    </form>
</div>
<div class="modal-footer anexo">

    <div class="row mt-3">
        <div class="col-sm-12 d-flex">

            <div class="flex-1">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-secondary" [disabled]="idAnexo === 0" (click)="descargarPdf()">
                  <i class="far fa-eye"></i>
                  Visualizar
              </button>
                </div>
            </div>

            <div class="flex-1 text-end">
                <button class="btn btn-success w-50" (click)="save()" [disabled]="this.formAnexo.invalid">
                    <i class="far fa-save"></i>
                    {{
                        (idAnexo === 0 ? 'Grabar' : 'Modificar')
                    }}
                </button>
            </div>
        </div>
    </div>

</div>