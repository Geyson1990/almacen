<div class="modal-header anexo bg-danger text-white">
  <h4 class="modal-title">
    {{ this.codigoProcedimientoTupa }} {{ this.descProcedimientoTupa }}
  </h4>
  <button type="button" class="btn-close btn-close-white" aria-label="Close"
    (click)="activeModal.close(graboUsuario)"></button>
</div>
<div class="modal-body anexo">
  <div class="container mt-2 mb-3">
    <form [formGroup]="anexoFG">
      <div class="center">
        <h6>{{ txtTitulo }}</h6>
      </div>
      <div ngbAccordion #acc="ngbAccordion" activeIds="seccion-2, seccion-3, seccion-4, seccion-5">
        <div [disabled]="a_Seccion2FG.disabled" ngbAccordionItem="seccion-2" [collapsed]="a_Seccion2FG.disabled">
          <h2 ngbAccordionHeader>
            <button ngbAccordionButton>II. DATOS DEL TRANSMISOR</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>
                <div class="row" *ngIf="a_Seccion2FG.enabled" formGroupName="a_Seccion2FG">
                  <div class="col-lg-12" *ngIf="a_s2_EquipoTransFA.enabled">
                    <div formArrayName="a_s2_EquipoTransFA">
                      <div class="mb-3">
                        <strong>Lista de Equipos Transmisores</strong>
                      </div>
                      <div class="row">
                        <div class="col-lg-12" [formGroup]="equipoTransFG">
                          <div class="row gx-2">
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_MarcaFC"
                                label="Marca" placeHolder="Ingrese la marca del equipo transmisor" [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_ModeloFC"
                                label="Modelo" placeHolder="Ingrese el modelo del equipo transmisor" [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_NroSerieFC"
                                label="Número de serie" placeHolder="Ingrese el número de serie del equipo transmisor"
                                [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_PotenciaFC"
                                label="Potencia de Salida"
                                placeHolder="Ingrese la potencia de salida del equipo transmisor" [maxLength]="30">
                              </app-basic-input>
                            </div>
                          </div>
                          <div class="row gx-2">
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_TipoEmisFC"
                                label="Tipo de Emisión" placeHolder="Ingrese el tipo de emisión del equipo transmisor"
                                [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_BandaOpeFC"
                                label="Banda de Operación"
                                placeHolder="Ingrese la banda de operación del equipo transmisor" [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoTransFG" inputFormControlName="et_AnioFC"
                                label="Año de Construcción"
                                placeHolder="Ingrese el año de construcción del equipo transmisor" [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg-auto col-xl-auto mb-3" style="align-self: end">
                              <button class="btn btn-danger" [disabled]="equipoTransFG.invalid"
                                (click)="saveEquipoTrans()">
                                <div *ngIf="
                                    indexEditEquipoTrans === -1;
                                    else elseBlock
                                  ">
                                  <i class="fas fa-plus-circle"></i>
                                  Agregar
                                </div>
                                <ng-template #elseBlock>
                                  <i class="fas fa-pencil-alt"></i>
                                  Modificar
                                </ng-template>
                              </button>

                              <button *ngIf="indexEditEquipoTrans !== -1" class="btn btn-warning ms-2"
                                (click)="nosaveEquipoTrans()">
                                <i class="fas fa-ban"></i>
                                Cancelar
                              </button>
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-12">
                          <div class="table-responsive">
                            <table class="table table-sm table-bordered table-hover table-striped">
                              <thead class="tabla-header-mtc">
                                <tr class="table-light">
                                  <th>N°</th>
                                  <th class="text-center">Marca</th>
                                  <th class="text-center">Modelo</th>
                                  <th class="text-center">Número de serie</th>
                                  <th class="text-center">
                                    Potencia de Salida
                                  </th>
                                  <th class="text-center">Tipo de Emisión</th>
                                  <th class="text-center">
                                    Banda de Operación
                                  </th>
                                  <th class="text-center">
                                    Año de Construcción
                                  </th>
                                  <th class="text-center">Acciones</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="text-center" *ngFor="
                                    let _ of a_s2_EquipoTransFA.controls;
                                    let i = index
                                  ">
                                  <td>{{ i + 1 }}</td>
                                  <td>{{ a_s2_et_MarcaFC(i).value }}</td>
                                  <td>{{ a_s2_et_ModeloFC(i).value }}</td>
                                  <td>{{ a_s2_et_NroSerieFC(i).value }}</td>
                                  <td>{{ a_s2_et_PotenciaFC(i).value }}</td>
                                  <td>{{ a_s2_et_TipoEmisFC(i).value }}</td>
                                  <td>{{ a_s2_et_BandaOpeFC(i).value }}</td>
                                  <td>{{ a_s2_et_AnioFC(i).value }}</td>
                                  <td>
                                    <i class="far fa-edit pe-2 text-primary cursor-pointer" title="Editar"
                                      (click)="editEquipoTrans(i)"></i>
                                    <i class="far fa-trash-alt ps-2 text-danger cursor-pointer" title="Eliminar"
                                      (click)="removeEquipoTrans(i)"></i>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <div ngbAccordionItem="seccion-3" [collapsed]="false">
          <h2 ngbAccordionHeader>
            <button ngbAccordionButton>III. DEL SISTEMA IRRADIANTE</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>
                <div class="row" *ngIf="a_Seccion3FG.enabled" formGroupName="a_Seccion3FG">
                  <div class="col-lg-12">
                    <div class="row gx-2">
                      <div class="col-lg">
                        <app-basic-input [parentForm]="a_Seccion3FG" inputFormControlName="a_s3_TipoAntFC"
                          label="Tipo de Antena" placeHolder="Ingrese el tipo de la antena" [maxLength]="30">
                        </app-basic-input>
                      </div>
                      <div class="col-lg">
                        <app-basic-input [parentForm]="a_Seccion3FG" inputFormControlName="a_s3_MarcaFC" label="Marca"
                          placeHolder="Ingrese la marca de la antena" [maxLength]="30">
                        </app-basic-input>
                      </div>
                      <div class="col-lg">
                        <app-basic-input [parentForm]="a_Seccion3FG" inputFormControlName="a_s3_ModeloFC" label="Modelo"
                          placeHolder="Ingrese el modelo de la antena" [maxLength]="30">
                        </app-basic-input>
                      </div>
                    </div>
                    <div class="row gx-2">
                      <div class="col-lg">
                        <app-basic-input [parentForm]="a_Seccion3FG" inputFormControlName="a_s3_GanaAntFC"
                          label="Ganancia de Antena" placeHolder="Ingrese la ganancia de la antena" [maxLength]="30">
                        </app-basic-input>
                      </div>
                      <div class="col-lg">
                        <app-basic-input [parentForm]="a_Seccion3FG" inputFormControlName="a_s3_TipoCableFC"
                          label="Tipo de Cable de Alimentación"
                          placeHolder="Ingrese el tipo de cable de alimentación de la antena" [maxLength]="30">
                        </app-basic-input>
                      </div>
                      <div class="col-lg">
                        <app-basic-input [parentForm]="a_Seccion3FG" inputFormControlName="a_s3_FiltroFC"
                          label="Filtros" placeHolder="Ingrese los filtros de la antena" [maxLength]="30">
                        </app-basic-input>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <div [disabled]="a_Seccion4FG.disabled" ngbAccordionItem="seccion-4" [collapsed]="a_Seccion4FG.disabled">
          <h2 ngbAccordionHeader>
            <button ngbAccordionButton>
              IV. EQUIPOS AUXILIARES Y ACCESORIOS - Instrumentos de medición,
              fuente de energia, amplificador lineal, otros
            </button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>
                <div class="row" *ngIf="a_Seccion4FG.enabled" formGroupName="a_Seccion4FG">
                  <div class="col-lg-12" *ngIf="a_s4_EquipoAuxFA.enabled">
                    <div formArrayName="a_s4_EquipoAuxFA">
                      <div class="mb-3">
                        <strong>Lista de Equipos Auxiliares y Accesorios</strong>
                      </div>
                      <div class="row">
                        <div class="col-lg-12" [formGroup]="equipoAuxFG">
                          <div class="row gx-2">
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoAuxFG" inputFormControlName="ea_DescripFC"
                                label="Descripción" placeHolder="Ingrese la descripción del equipo auxiliar"
                                [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoAuxFG" inputFormControlName="ea_MarcaFC"
                                label="Marca" placeHolder="Ingrese la marca del equipo auxiliar" [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoAuxFG" inputFormControlName="ea_ModeloFC"
                                label="Modelo" placeHolder="Ingrese el modelo del equipo auxiliar" [maxLength]="30">
                              </app-basic-input>
                            </div>
                          </div>
                          <div class="row gx-2">
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoAuxFG" inputFormControlName="ea_NroSerieFC"
                                label="Número de serie" placeHolder="Ingrese el número de serie del equipo auxiliar"
                                [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg">
                              <app-basic-input [parentForm]="equipoAuxFG" inputFormControlName="ea_AnioFC" label="Año"
                                placeHolder="Ingrese el año del equipo auxiliar" [maxLength]="30">
                              </app-basic-input>
                            </div>
                            <div class="col-lg-auto col-xl-auto mb-3" style="align-self: end">
                              <button class="btn btn-danger" [disabled]="equipoAuxFG.invalid" (click)="saveEquipoAux()">
                                <div *ngIf="
                                    indexEditEquipoAux === -1;
                                    else elseBlock
                                  ">
                                  <i class="fas fa-plus-circle"></i>
                                  Agregar
                                </div>
                                <ng-template #elseBlock>
                                  <i class="fas fa-pencil-alt"></i>
                                  Modificar
                                </ng-template>
                              </button>

                              <button *ngIf="indexEditEquipoAux !== -1" class="btn btn-warning ms-2"
                                (click)="nosaveEquipoAux()">
                                <i class="fas fa-ban"></i>
                                Cancelar
                              </button>
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-12">
                          <div class="table-responsive">
                            <table class="table table-sm table-bordered table-hover table-striped">
                              <thead class="tabla-header-mtc">
                                <tr class="table-light">
                                  <th>N°</th>
                                  <th class="text-center">Descripción</th>
                                  <th class="text-center">Marca</th>
                                  <th class="text-center">Modelo</th>
                                  <th class="text-center">Número de serie</th>
                                  <th class="text-center">Año</th>
                                  <th class="text-center">Acciones</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="text-center" *ngFor="
                                    let _ of a_s4_EquipoAuxFA.controls;
                                    let i = index
                                  ">
                                  <td>{{ i + 1 }}</td>
                                  <td>{{ a_s4_ea_DescripFC(i).value }}</td>
                                  <td>{{ a_s4_ea_MarcaFC(i).value }}</td>
                                  <td>{{ a_s4_ea_ModeloFC(i).value }}</td>
                                  <td>{{ a_s4_ea_NroSerieFC(i).value }}</td>
                                  <td>{{ a_s4_ea_AnioFC(i).value }}</td>
                                  <td>
                                    <i class="far fa-edit pe-2 text-primary cursor-pointer" title="Editar"
                                      (click)="editEquipoAux(i)"></i>
                                    <i class="far fa-trash-alt ps-2 text-danger cursor-pointer" title="Eliminar"
                                      (click)="removeEquipoAux(i)"></i>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <div ngbAccordionItem="seccion-5" [collapsed]="false">
          <h2 ngbAccordionHeader>
            <button ngbAccordionButton>V. DECLARACIONES JURADAS</button>
          </h2>
          <div ngbAccordionCollapse>
            <div ngbAccordionBody>
              <ng-template>
                <div formGroupName="a_Seccion5FG">
                  <div class="mt-2 mb-4 ng-star-inserted" *ngIf="a_s5_declaracion1FC.enabled">
                    <div class="alert alert-custom">
                      <div _ngcontent-ehx-c118="" class="row gx-2" style="align-items: center">
                        <div _ngcontent-ehx-c118="" class="col">
                          <div _ngcontent-ehx-c118="">
                            1 Toda la información proporcionada es veraz, así
                            como los documentos presentados son auténticos, en
                            caso contrario, me someto al procedimiento y a las
                            sanciones previstas en la Ley N° 27444, Ley del
                            Procedimiento Administrativo General y/o normas
                            complementarias.
                          </div>
                        </div>
                        <div _ngcontent-ehx-c118="" class="col-auto">
                          <div _ngcontent-ehx-c118="" class="d-flex flex-row p-2 ms-4">
                            <ui-switch formControlName="a_s5_declaracion1FC"
                              class="ng-valid ng-touched ng-dirty"></ui-switch>
                            NO / SI
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-active">
                    <span style="text-align: justify; display: block">
                      NOTA: En el presente documento electrónico se ha vinculado
                      e identificado al firmante, así como se ha garantizado la
                      autenticación e integridad del mismo a través de la firma
                      electrónica utilizada atraves del usuario y clave de
                      ingreso al Sistema Tupa Digital del Ministerio de
                      Transportes y Comunicaciones , la cual tiene la misma
                      validez y eficacia jurídica que la firma manuscrita, de
                      conformidad con el artículo primero y segundo de la Ley N°
                      27269 - Ley de Firmas y Certificados Digitales y lo
                      establecido en el inciso c) del numeral 47.1 del Art 47
                      del Reglamento de la Ley de Gobierno Digital, aprobado
                      mediante Decreto Supremo 029-2021-PCM.
                    </span>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="modal-footer anexo">
  <div class="row">
    <div class="col-lg-12 d-flex">
      <div class="flex-1">
        <div class="btn-group" role="group" aria-label="Basic example">
          <button type="button" class="btn btn-secondary" [disabled]="idAnexo === 0" (click)="descargarPdf()">
            <i class="far fa-eye"></i>
            Visualizar
          </button>
        </div>
      </div>
      <div class="flex-1 text-end">
        <button class="btn btn-success" (click)="guardarAnexo()" [disabled]="anexoFG.invalid">
          <i class="far fa-save"></i>
          {{ idAnexo === 0 ? "Grabar" : "Modificar" }}
        </button>
      </div>
    </div>
  </div>
</div>