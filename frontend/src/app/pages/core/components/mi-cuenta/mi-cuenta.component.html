<form [formGroup]="registroFormGroup" (ngSubmit)="submitRegistro(btnSubmitRegistro)">
    <div class="row">
        <div class="col-md-12 pb-4" *ngIf="mostrarPersonaJ" formGroupName="datosEmpresa">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12" style="text-align:center;">
                            <h3>
                                <strong>Datos de Empresa para acceder a TUPA Digital Minem</strong>
                            </h3>
                        </div>
                        <div class="col-md-6">
                            <label class="control-label">RUC</label>
                            <input type="text" class="form-control" formControlName="rucFormControl">
                        </div>
                        <div class="col-md-6">
                            <label class="control-label">Razón social</label>
                            <input type="text" class="form-control" formControlName="razonSocialFormControl">
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="control-label">Correo electrónico (*)</label>
                                <input type="email" class="form-control" formControlName="emailFormControl"
                                    placeholder="Ingrese el correo electrónico">
                                <div *ngIf="emailFormControl.invalid && (emailFormControl.dirty || emailFormControl.touched)"
                                    class="text-danger">
                                    <div *ngIf="emailFormControl.errors?.required">
                                        El campo es obligatorio
                                    </div>
                                    <div *ngIf="emailFormControl.errors?.email">
                                        El correo electrónico no es válido
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="control-label">Dirección (*)</label>
                                <input type="text" class="form-control" formControlName="direccionFormControl"
                                    placeholder="Ingrese la dirección" [readonly]="confirmDirEmpFormControl.value">
                                <div *ngIf="direccionFormControl.invalid && (direccionFormControl.dirty || direccionFormControl.touched)"
                                    class="text-danger">
                                    <div *ngIf="direccionFormControl.errors?.required">
                                        El campo es obligatorio
                                    </div>
                                </div>
                                <div class="form-check pt-2">
                                    <input class="form-check-input" id="idCbConfirmDirecc" type="checkbox"
                                        formControlName="confirmDirEmpFormControl">
                                    <label class="form-check-label" for="idCbConfirmDirecc">
                                        Confirmar Dirección
                                    </label>
                                </div>
                                <div *ngIf="confirmDirEmpFormControl.invalid && (confirmDirEmpFormControl.dirty || confirmDirEmpFormControl.touched)"
                                    class="text-danger">
                                    <div *ngIf="confirmDirEmpFormControl.errors?.required">
                                        Debe confirmar su direccion para continuar
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-12 pb-4" formGroupName="datosUsuario">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12" style="text-align:center">
                            <h3><strong>Datos de Usuario para acceder a TUPA Digital Minem</strong></h3>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3" *ngIf="mostrarPersonaNR">
                                <label class="control-label">RUC (*)</label>
                                <input type="text" class="form-control" appDigitOnly min="0" maxlength="11"
                                    formControlName="rucFormControl">
                            </div>
                            <div class="mb-3" *ngIf="mostrarPersonaN || mostrarPersonaNR">
                                <label class="control-label">DNI (*)</label>
                                <input type="text" class="form-control" appDigitOnly min="0" maxlength="8"
                                    formControlName="dniFormControl">
                            </div>
                            <div class="mb-3">
                                <label class="control-label">Nombres (*)</label>
                                <input type="text" class="form-control" formControlName="nombresFormControl"
                                    placeholder="Ingrese nombres">
                            </div>
                            <div class="mb-3">
                                <label class="control-label">Apellido paterno (*)</label>
                                <input type="text" class="form-control" formControlName="apPaternoFormControl"
                                    placeholder="Ingrese apellido paterno">
                            </div>
                            <div class="mb-3">
                                <label class="control-label">Apellido materno (*)</label>
                                <input type="text" class="form-control" formControlName="apMaternoFormControl"
                                    placeholder="Ingrese apellido materno">
                            </div>
                            <div class="mb-3">
                                <label class="control-label">Domicilio Legal (*)</label>
                                <input type="text" class="form-control" formControlName="domicilioFormControl"
                                    [readonly]="confirmDomLegFormControl.value"
                                    placeholder="Ingrese el domicilio legal">
                                <div *ngIf="domicilioFormControl.invalid && (domicilioFormControl.dirty || domicilioFormControl.touched)"
                                    class="text-danger">
                                    <div *ngIf="domicilioFormControl.errors?.required">
                                        El campo es obligatorio
                                    </div>
                                </div>
                                <div class="form-check pt-2">
                                    <input class="form-check-input" id="cbConfirmDL" type="checkbox"
                                        formControlName="confirmDomLegFormControl">
                                    <label class="form-check-label" for="cbConfirmDL">Confirmar domicilio
                                        legal</label>
                                </div>
                                <div *ngIf="confirmDomLegFormControl.invalid && (confirmDomLegFormControl.dirty || confirmDomLegFormControl.touched)"
                                    class="text-danger">
                                    <div *ngIf="confirmDomLegFormControl.errors?.required">
                                        Debe confirmar su domicilio legal para continuar
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3" *ngIf="nombresFormControl?.value.length > 0"
                                style="text-align: center;">
                                <img [src]="'data:image/BMP;base64,' + usFoto" alt="Foto de perfil"
                                    class="img-thumbnail">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <app-ubigeo #ubigeoCmp [parentForm]="registroFormGroup.get('datosUsuario')"
                                depaFormControlName="depaFormControl" provFormControlName="provFormControl"
                                distFormControlName="distFormControl" depaFormLabel="Departamento (*)"
                                provFormLabel="Provincia (*)" distFormLabel="Distrito (*)"></app-ubigeo>
                            <div class="mb-3">
                                <label class="control-label">Correo electrónico (*)</label>
                                <input type="email" class="form-control" formControlName="emailFormControl"
                                    placeholder="Ingrese su correo electrónico">
                                <div *ngIf="usEmailFormControl.invalid && (usEmailFormControl.dirty || usEmailFormControl.touched)"
                                    class="text-danger">
                                    <div *ngIf="usEmailFormControl.errors?.required">
                                        El campo es obligatorio
                                    </div>
                                    <div *ngIf="usEmailFormControl.errors?.email">
                                        El correo electrónico no es válido
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="control-label">Número celular</label>
                                <div class="d-flex flex-row align-items-center">
                                    <input type="text" class="form-control me-2" formControlName="celularFormControl"
                                        appDigitOnly min="0" placeholder="Número celular"
                                        [readonly]="!notCelularFormControl.value">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" id="idCbNotCel" type="checkbox"
                                            formControlName="notCelularFormControl">
                                        <label class="form-check-label" for="idCbNotCel">Notificar por
                                            celular</label>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="control-label">Número de Teléfono</label>
                                <div class="d-flex flex-row align-items-center">
                                    <input type="text" class="form-control me-2" formControlName="codTelFijoFormControl"
                                        appDigitOnly min="0" style="width:50px" maxlength="2" placeholder="Cod.">
                                    <input type="text" class="form-control" formControlName="telFijoFormControl"
                                        appDigitOnly min="0" maxlength="7" placeholder="Número de Teléfono">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="offset-md-2 col-md-8 pb-2" *ngIf="messageError">
            <div class="text-danger" role="alert">
                <strong>{{ messageError }}</strong>
            </div>
        </div>
        <div class="offset-md-2 col-md-8">
            <div style="text-align: center">
                <button #btnSubmitRegistro [disabled]="registroFormGroup.invalid" type="submit"
                    class="btn btn-lg btn-success me-4">
                    Registrar
                </button>
                <a class="btn btn-lg btn-danger" routerLink="/autenticacion/iniciar-sesion">Cancelar</a>
            </div>
        </div>
    </div>
</form>